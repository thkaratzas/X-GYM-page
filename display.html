<!DOCTYPE html>
<html lang="el">
<head>
    <!-- Firebase App (the core Firebase SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>

<!-- Firebase Realtime Database -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <meta charset="UTF-8">
  <title>Κατάσταση Συνδρομής</title>
  <style>
   body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: black;
      color: white;
      background-image: url("https://i.postimg.cc/025nj58G/processed-2-DA30989-5818-4-DF0-A5-A1-A9-A04-F93091-B.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      overflow: hidden;
    }
    .overlay {
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1;
    }
    .content {
      position: relative;
      z-index: 2;
      text-align: center;
      top: 60px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #neonText {
  font-size: 3.7rem;
  font-weight: bold;
  text-align: center;
}

    #neonText span {
  display: inline-block;
  color: #00ccff;
  text-shadow:
    0 0 5px #00ccff,
    0 0 10px #00ccff,
    0 0 20px #00ccff,
    0 0 40px #0099ff,
    0 0 80px #0066ff;
  animation: flicker 3s infinite;
}

/* Σβηστό γράμμα */
.flicker-off {
  animation: offFlicker 1s infinite;
  opacity: 0.3;
  text-shadow: none;
}

/* Animation για φυσικό αναβόσβημα */
@keyframes flicker {
  0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
    opacity: 1;
  }
  20%, 22%, 24%, 55% {
    opacity: 0.5;
  }
}

@keyframes offFlicker {
  0%, 100% { opacity: 0.3; }
  10%, 90% { opacity: 0.6; }
  50% { opacity: 0.1; }
}
  </style>
</head>
<body>

    <div class="overlay"></div>
    <div class="content" id="mainContent">
        <h1 id="neonText">
          <span>A</span><span>L</span><span>W</span><span>A</span><span>Y</span><span>S</span>&nbsp;
          <span>H</span><span>U</span><span>N</span><span>G</span><span>R</span><span>Y</span>&nbsp;
          <span>F</span><span>O</span><span>R</span>&nbsp;
          <span>M</span><span>O</span><span>R</span><span>E</span>
        </h1>

    </div>
    <div id="subscriptionStatus" style="font-size: 2.5rem; margin-top: 30px;"></div>
    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyBcwXllrv82qw6o7FCwgJL2_qNGheLNit0",
          authDomain: "xgym-b5623.firebaseapp.com",
          databaseURL: "https://xgym-b5623-default-rtdb.europe-west1.firebasedatabase.app",
          projectId: "xgym-b5623",
          storageBucket: "xgym-b5623.appspot.com",
          messagingSenderId: "269441169531",
          appId: "1:269441169531:web:ff6633493eb25a73f4cade",
          measurementId: "G-G7ZT57CELS"
        };
      
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
      
        // Get a reference to the database
        const db = firebase.database();
        const statusDiv = document.getElementById('subscriptionStatus');

// Παρακολουθούμε το πεδίο "lastScanned" στη βάση
db.ref("lastScanned").on("value", async (snapshot) => {
  const scannedQr = snapshot.val();
  if (scannedQr) {
    console.log("Σκαναρίστηκε:", scannedQr);

    // Ψάχνουμε τον πελάτη μέσα στη βάση
    const userRef = db.ref("customers/" + scannedQr);
    const userSnap = await userRef.get();

    if (userSnap.exists()) {
      const userData = userSnap.val();
      const status = userData.status || "Άγνωστη";

      if (status === "Ενεργή") {
        statusDiv.innerHTML = "✅ Η συνδρομή είναι ΕΝΕΡΓΗ";
        statusDiv.style.color = "lime";
      } else {
        statusDiv.innerHTML = "❌ Η συνδρομή έχει ΛΗΞΕΙ";
        statusDiv.style.color = "red";
      }
    } else {
      statusDiv.innerHTML = "⛔️ Ο πελάτης δεν βρέθηκε!";
      statusDiv.style.color = "orange";
    }
  }
});
      </script>

</body>
</html>