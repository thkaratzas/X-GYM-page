<!DOCTYPE html>
<html lang="el">
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Firebase App (the core Firebase SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js"></script>

<!-- Firebase Realtime Database -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>X-GYM Report</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: black;
      color: white;
      background-image: url("https://i.postimg.cc/025nj58G/processed-2-DA30989-5818-4-DF0-A5-A1-A9-A04-F93091-B.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      overflow: hidden;
    }

    .overlay {
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1;
    }


   /* ÎŒÎ»Î± Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ */
   .dropbtn,
.home-btn {
  position: relative;
  overflow: hidden;
  z-index: 1;
  background: #111;
  color: white;
  padding: 10px 20px;
  min-width: 120px;       /* ğŸ‘ˆ ÎŠÎ´Î¹Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ Î³Î¹Î± ÏŒÎ»Î± */
  text-align: center;   /* ğŸ‘ˆ Î“Î¹Î± ÎµÏ…Î¸Ï…Î³ÏÎ¬Î¼Î¼Î¹ÏƒÎ· ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… */
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  height: 50px;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  box-shadow: 0 8px 16px rgba(100, 100, 100, 0.4);
}

/* Î¤Î¿ animated Î¼Î¿Ï„Î¯Î²Î¿ */
.dropbtn::before,
.home-btn::before{
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background-image: repeating-linear-gradient(
    45deg,
    rgba(255, 255, 255, 0.05) 0,
    rgba(255, 255, 255, 0.05) 2px,
    transparent 2px,
    transparent 6px
  );
  transform: rotate(0deg);
  opacity: 0;
  transition: opacity 0.4s ease;
  animation: diagonalWaves 4s linear infinite;
  z-index: 0;
  pointer-events: none;
}

.dropbtn:hover::before,
.home-btn:hover::before{
  opacity: 1;
}

.dropbtn:hover,
.home-btn:hover{
  transform: scale(1.05);
  box-shadow: 0 8px 16px rgba(0,0,0,0.6), 0 8px 16px rgba(0,0,0,0.6);
}

/* Keyframes Î³Î¹Î± Î´Î¹Î±Î³ÏÎ½Î¹Î± ÎºÎ¯Î½Î·ÏƒÎ· */
@keyframes diagonalWaves {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 100px 100px;
  }
}

/* Î¤Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï„Î¿ pattern */
.dropbtn span,
.home-btn span {
  position: relative;
  z-index: 2;
}

    .dropdown {
      position: relative;
    } 

    .dropdown-content {
      position: absolute;
      opacity: 0;
      visibility: hidden;
      position: absolute;
      top: 100%;
      font-size: 16px;
      background-color: #111;
      min-width: 180px;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 8px 16px rgba(100, 100, 100, 0.4);
      z-index: 10;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    .dropdown:hover .dropdown-content {
      opacity: 1;
      visibility: visible;
    }

    .dropdown-content button {
      font-size: 0.9rem; 
      background-color: #111;
      color: white;
      padding: 10px;
      width: 100%;
      border: none;
      text-align: left;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .dropdown-content button:hover {
      background-color: #333;
    }

    .content {
      position: relative;
      z-index: 2;
      text-align: center;
      top: 60px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #neonText {
  font-size: 3.7rem;
  font-weight: bold;
  text-align: center;
}

    #neonText span {
  display: inline-block;
  color: #00ccff;
  text-shadow:
    0 0 5px #00ccff,
    0 0 10px #00ccff,
    0 0 20px #00ccff,
    0 0 40px #0099ff,
    0 0 80px #0066ff;
  animation: flicker 3s infinite;
}

/* Î£Î²Î·ÏƒÏ„ÏŒ Î³ÏÎ¬Î¼Î¼Î± */
.flicker-off {
  animation: offFlicker 1s infinite;
  opacity: 0.3;
  text-shadow: none;
}

/* Animation Î³Î¹Î± Ï†Ï…ÏƒÎ¹ÎºÏŒ Î±Î½Î±Î²ÏŒÏƒÎ²Î·Î¼Î± */
@keyframes flicker {
  0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
    opacity: 1;
  }
  20%, 22%, 24%, 55% {
    opacity: 0.5;
  }
}

@keyframes offFlicker {
  0%, 100% { opacity: 0.3; }
  10%, 90% { opacity: 0.6; }
  50% { opacity: 0.1; }
}

#qrInput {
  font-size: 1.1rem;
  margin-top: 145px;
  padding: 12px 28px;
  width: 440px;               /* Ï€Î¹Î¿ Î¼Î±ÎºÏÏ */
  border: none;
  border-radius: 10px;
  outline: none;
  color: white;
  background: linear-gradient(to right, #222, #444); /* Î¯Î´Î¹Î¿ Î¼Îµ home button */
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);          /* ÎµÎ»Î±Ï†ÏÎ¹Î¬ ÏƒÎºÎ¹Î¬ */
  transition: all 0.3s ease;
  text-align: center;
}

#qrInput::placeholder {
  color: rgba(255, 255, 255, 0.5);  /* Î´Î¹Î±ÎºÏÎ¹Ï„Î¹ÎºÏŒ placeholder */
}

#qrInput:focus {
  transform: scale(1.02);  /* ÎµÎ»Î±Ï†ÏÏ zoom on focus */
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
}

    .log-entry {
      font-size: 1rem;
      margin: 5px 0;
      display: block;
      text-align: left;
      opacity: 0.9;
      animation: fadeIn 0.4s ease-in-out;
    }

    .checkmark {
      color: #00ff00;
      font-size: 1.2rem;
      margin-right: 8px;
    }

    #log {
      max-height: 300px;
      overflow-y: auto;
      padding-right: 10px;
      width: 320px;
      text-align: left;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeInBackground {
  from {
    opacity: 0;
    background-size: 120%;
  }
  to {
    opacity: 1;
    background-size: 100%;
  }
}
@keyframes showDayLog {
  from {
    opacity: 0;
    transform: translateY(-20px);  /* ÎÎµÎºÎ¹Î½Î¬ Î±Ï€ÏŒ Ï€Î¬Î½Ï‰ */
  }
  to {
    opacity: 1;
    transform: translateY(0);  /* Î¤ÎµÎ»Î¹ÎºÎ® Î¸Î­ÏƒÎ· */
  }
}

#dayLogView {
  animation: showDayLog 0.8s ease-out;
}

body {
  transition: background-image 0.5s ease-in-out;
}

.show-day-background {
  animation: fadeInBackground 1s ease-in-out forwards;
}



/* Î£Ï„Ï…Î» Î³Î¹Î± Ï„Î¿ button */
/* Î’Î±ÏƒÎ¹ÎºÏŒ ÏƒÏ„Ï…Î» ÎºÎ¿Ï…Î¼Ï€Î¹ÏÎ½ */
.dropbtn,
.home-btn {
  position: relative;
  overflow: hidden;
  z-index: 1;
  background: #111;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  box-shadow: 0 4px 6px rgba(0,0,0,0.4);
}

/* Î¤Î¿ geometric pattern layer */
.dropbtn::before,
.home-btn::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background-image: radial-gradient(circle, rgba(255,255,255,0.08) 1px, transparent 1px);
  background-size: 15px 15px;
  transform: rotate(0deg);
  opacity: 0;
  transition: opacity 0.4s ease;
  animation: hexPatternMove 6s linear infinite;
  z-index: 0;
  pointer-events: none;
}
#dailyStatsPage table {
  margin: 0 auto;
  max-width: 800px;
  width: 90%;
  background-color: rgba(0, 0, 0, 0.6);
  color: white;
  border-collapse: collapse;
  border-radius: 12px;
  overflow: hidden;
}

#dailyStatsPage.statistics-page {
  background-image: url('https://i.postimg.cc/pVnx1GJm/IMG-4763-2.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  width: 100vw;
  height: 100vh;
  margin: 0;
  display: block;
  position: relative;
  z-index: 1;
  padding: 0;
  animation: fadeIn 0.8s ease-in-out;
  overflow-y: auto !important;
  max-height: 100vh;
  height: auto; 
}

#dailyChart {
  width: 100% !important;
  height: auto !important;
  display: block;
  margin: 0 auto;
}

.daily-content {
  background-color: rgba(0, 0, 0, 0.6);
  padding: 2rem;
  border-radius: 12px;
  max-width: 1000px;
  width: 100%;
  text-align: center;
  color: white;
  z-index: 2;
  margin-top: 100px; /* â†‘ ÎšÏÎ±Ï„Î¬ Î±Ï€ÏŒÏƒÏ„Î±ÏƒÎ· Î±Ï€ÏŒ Ï€Î¬Î½Ï‰ */
  margin-bottom: 40px;
  
}
#peakHourBox {
  background-color: rgba(255, 255, 255, 0.05);  /* Î·Î¼Î¹Î´Î¹Î±Ï†Î±Î½Î­Ï‚ Î»ÎµÏ…ÎºÏŒ */
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  padding: 0.7rem 1.2rem;
  border-radius: 10px;
  font-weight: 500;
  font-size: 1.3rem;
  margin-top: 20px;
  display: inline-block;
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.1);
}
#totalEntriesBox {
  background-color: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  padding: 0.7rem 1.2rem;
  border-radius: 10px;
  font-weight: 500;
  font-size: 1.3rem;
  margin-top: 20px;
  display: inline-block;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);
}

/* Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· ÏƒÏ„Î¿ hover */
.dropbtn:hover::before,
.home-btn:hover::before {
  opacity: 1;
}

/* ÎšÎ¹Î½Î¿ÏÎ¼ÎµÎ½Î· Î»Î¬Î¼ÏˆÎ· */
.dropbtn:hover,
.home-btn:hover{
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(255,255,255,0.15), 0 0 30px rgba(255,255,255,0.1);
}

/* ÎšÎ¯Î½Î·ÏƒÎ· pattern */
@keyframes hexPatternMove {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 100px 100px;
  }
}

/* ÎšÎµÎ¯Î¼ÎµÎ½Î¿ Ï€Î¬Î½Ï„Î± Ï€Î¬Î½Ï‰ Î±Ï€' Ï„Î¿ pattern */
.dropbtn span,
.home-btn span {
  position: relative;
  z-index: 2;
}

/* Dropdown container */
.dropdown {
  position: relative;
}

/* Dropdown content */
.dropdown-content {
  opacity: 0;
  visibility: hidden;
  position: absolute;
  top: 100%;
  background-color: #111;
  min-width: 180px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6);
  z-index: 10;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.dropdown:hover .dropdown-content {
  opacity: 1;
  visibility: visible;
}

/* Button styling inside dropdown */
.dropdown-content button {
  font-size: 0.9rem;
  background-color: #111;
  color: white;
  padding: 10px;
  width: 100%;
  border: none;
  text-align: left;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

/* Hover effect on dropdown buttons */
.dropdown-content button:hover {
  background-color: #333;
}
    /* Î•Î²Î´Î¿Î¼Î¬Î´ÎµÏ‚ View */
    #weeksView {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 2;
      width: 100%;
      height: 100%;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background: url('https://i.postimg.cc/ZnFn6ykY/IMG-4159.jpg') no-repeat center center / cover;
      animation: fadeIn 0.8s ease-in-out;
    }

    #todayView {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 2;
      width: 100%;
      height: 100%;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background: url('https://i.postimg.cc/4NQdC4zX/IMG-4161.jpg') no-repeat center center / cover;
      animation: fadeIn 0.8s ease-in-out;
    }

    #dailyChartContainer {
  width: 100%;
  height: calc(100vh - 100px); /* Adjust based on topbar height */
  padding-top: 100px;
}

    #selectedMonthTitle, #todayTitle {
      font-size: 2rem;
      margin-bottom: 30px;
      background-color: rgba(0, 0, 0, 0.6);
      padding: 10px 20px;
      border-radius: 10px;
    }

    .weeks-grid {
      display: grid;
      grid-template-columns: repeat(2, 200px);
      gap: 30px;
    }

    .weeks-grid button {
      background: linear-gradient(135deg, #222, #444);
      border: none;
      color: white;
      padding: 30px;
      border-radius: 15px;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.4);
      transition: all 0.3s ease;
    }

    .weeks-grid button:hover {
      background: linear-gradient(135deg, #444, #666);
      transform: translateY(-5px);
    }
 .day-btn {
  background-color: #222;
  color: white;
  padding: 10px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  transition: background-color 0.2s ease;
  width: 100%;
}
.day-btn:hover {
  background-color: #444;
}
#backToWeeks {
  background: linear-gradient(to right, #222, #444);
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  width: 60px; /* Î‘Ï…Î¾Î¬Î½Î¿Ï…Î¼Îµ Ï„Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ Ï„Î¿Ï… ÎºÎ¿Ï…Î¼Ï€Î¹Î¿Ï */
  height: 60px; /* Î‘Ï…Î¾Î¬Î½Î¿Ï…Î¼Îµ Ï„Î¿ ÏÏˆÎ¿Ï‚ Ï„Î¿Ï… ÎºÎ¿Ï…Î¼Ï€Î¹Î¿Ï */
}

#backToWeeks svg {
  width: 40px;  /* Î¡ÏÎ¸Î¼Î¹ÏƒÎ· Ï„Î¿Ï… SVG Î³Î¹Î± Ï„Î¿ Î½Î­Î¿ Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿ Î¼Î­Î³ÎµÎ¸Î¿Ï‚ */
  height: 40px;
}

#backToWeeks:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 8px rgba(0, 0, 0, 0.6);  /* Î‘Ï…Î¾Î¬Î½ÎµÎ¹ Ï„Î· ÏƒÎºÎ¹Î¬ ÏŒÏ„Î±Î½ Ï€ÎµÏÎ½Î¬ÎµÎ¹ Î¿ ÎºÎ­ÏÏƒÎ¿ÏÎ±Ï‚ */
}
/* Î’Î±ÏƒÎ¹ÎºÏŒ ÏƒÏ„Ï…Î» Î³Î¹Î± ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ Ï€Î¯Î½Î±ÎºÎµÏ‚ */
table {
  width: 90%;
  max-width: 800px;
  margin: 30px auto;
  border-collapse: collapse;
  border-radius: 12px;
  overflow: hidden;
  background: rgba(20, 20, 20, 0.75);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  transition: transform 0.3s ease;
}

table:hover {
  transform: scale(1.01);
}

/* ÎšÎµÏ†Î±Î»Î¯Î´ÎµÏ‚ */
thead {
  background: rgba(255, 255, 255, 0.05);
}

th {
  padding: 16px;
  font-size: 1.1rem;
  color: #00ccff;
  text-align: left;
  border-bottom: 1px solid rgba(255, 255, 255, 0.15);
}

/* Î“ÏÎ±Î¼Î¼Î­Ï‚ Ï€Î¯Î½Î±ÎºÎ± */
td {
  padding: 14px 16px;
  font-size: 1rem;
  color: #e0e0e0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.07);
  transition: background-color 0.2s ease;
}

tr:last-child td {
  border-bottom: none;
}

tr:hover td {
  background-color: rgba(255, 255, 255, 0.05);
}
tbody tr {
  animation: fadeIn 0.6s ease both;
}

tbody tr:nth-child(even) {
  background-color: rgba(255, 255, 255, 0.02);
}
body {
      padding-bottom: 80px;
    }

    html {
      scroll-behavior: smooth;
    }

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.97);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.fade-in {
  animation: fadeIn 0.9s ease forwards;
}
@media (max-width: 600px) {
  table {
    font-size: 0.9rem;
  }

  th, td {
    padding: 10px;
  }
}
.stats-chart-container {
  background: rgba(0, 0, 0, 0.4);
  border: 2px solid rgba(0, 255, 255, 0.5);
  box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
  border-radius: 20px;
  padding: 1.5rem;
  backdrop-filter: blur(10px);
  animation: fadeIn 1.5s ease-in-out;
}
  .stat-box-container {
  display: flex;
  justify-content: center; /* âœ… ÎšÎµÎ½Ï„ÏÎ¹ÎºÎ® ÏƒÏ„Î¿Î¯Ï‡Î¹ÏƒÎ· */
  gap: 2rem;
  margin-top: 2rem;
  margin-bottom: 3rem;
  flex-wrap: wrap;
}

  .stat-box {
  background-color: rgba(255, 255, 255, 0.1);
  padding: 12px 20px;
  border-radius: 12px;
  font-size: 18px;
  font-weight: bold;
  color: white;
  min-width: 260px;
  text-align: center;
  box-shadow: 0 0 10px rgba(0,0,0,0.4);
  backdrop-filter: blur(3px);
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
}

  @media (max-width: 600px) {
    .stat-box-container {
      flex-direction: column;
    }
  }
  @keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-home {
  animation: fadeSlideIn 0.9s ease;
}
body {
  font-family: 'Lato', sans-serif;
  background-color: #24303a;
  color: white;
  text-align: center;
}

/* Container Î³Î¹Î± Ï„Î¹Ï‚ Ï€Î¯Ï„ÎµÏ‚ */
.charts-row {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 30px;
  margin-top: 20px;
  margin-bottom: 50px;
  padding: 10px 0;
}

/* ÎšÎ¬Î¸Îµ Ï€Î¯Ï„Î± */
.chart {
  color: #4a667a;
  background-color: #1e2730;
  margin: 10px;
  padding: 15px 20px 40px 20px;
  box-sizing: border-box;
  text-align: center;
  position: relative;
  display: inline-block;
  width: 300px;
  border-radius: 12px;
}

/* ÎšÎ¬Î½ÎµÎ¹ Ï„Î¹Ï‚ Ï€Î¯Ï„ÎµÏ‚ responsive */
@media screen and (max-width: 700px) {
  .chart {
    width: 90%;
  }
}

.chart.circle {
  background-color: rgba(20, 30, 40, 0.9);
  color: #4a667a;
  padding: 20px;
  border-radius: 16px;
  text-align: center;
  position: relative;
  width: 280px;
  box-shadow: 0 0 10px rgba(0,0,0,0.4);
}

@media screen and (max-width: 700px) {
  .chart {
    width: calc(100% - 20px);
  }
}

@media screen and (min-width: 700px) {
  .chart {
    width: calc(50% - 20px);
  }
}

.title {
  font-size: 22px;
  color: white;
  margin-bottom: 12px;
}

.chart-circle {
  width: 200px;
  height: 200px;
  transform: rotate(90deg);
  display: block;
  margin: 0 auto;
}

.chart-svg {
  position: relative;
  display: inline-block;
  width: 200px;
  height: 200px;
}

.circle-percentage {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  font-size: 48px;
  color: white;
}

@media screen and (max-width: 700px) {
  .chart.circle {
    width: 90%;
  }
}

.align-center {
  text-align: center;
}

.triangle {
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 28px 0 0 28px;
  position: absolute;
  left: 0;
  bottom: 0;
}

.triangle.green {
  border-color: transparent transparent transparent #48c15e;
}

.triangle.red {
  border-color: transparent transparent transparent #ef6670;
}

.underlay {
  stroke-width: 5;
  fill: transparent;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke: #24303a;
}
.daily-wrapper {
  display: flex;
  justify-content: center;
  width: 100%;
}
  .chart-svg {
    width: 200px;
    height: 200px;
  }

.chart-svg .circle-percentage {
  position: absolute;
  top: 38%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 32px;
  font-weight: bold;
  color: white;
}

  .chart-circle {
    width: 200px;
    height: 200px;
  }

.underlay {
  fill: none;
  stroke: #1f2a38;
  stroke-width: 10;
}

.circle-overlay {
  fill: none;
  stroke-width: 10;
  stroke-linecap: round;
  transition: stroke-dashoffset 5s ease;
}
.chart.circle.animate .overlay {
  animation: fillCircle 5s ease forwards;
}

@keyframes fillCircle {
  from {
    stroke-dashoffset: 282.6;
  }
  to {
    stroke-dashoffset: var(--target-offset);
  }
}
.daily-income-table {
  font-family: 'Red Hat Display', sans-serif;
  font-weight: bold;
  margin: 50px auto;
  perspective: 2000px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.daily-income-table table {
  border-spacing: 0px;
  width: 680px;
  box-shadow: 5px 4px 30px rgba(0, 0, 0, 0.1);
  border-radius: 10px;
  background: #fff;
  transition: all 0.5s;
  overflow: hidden;
}

.daily-income-table td {
  padding: 20px 15px;
  color: #333; /* Î‰ ÏŒ,Ï„Î¹ Î¬Î»Î»Î¿ Î¸ÎµÏ‚ â€“ ÏŒÏ‡Î¹ Î»ÎµÏ…ÎºÏŒ */
}

.daily-income-table thead {
  background: linear-gradient(45deg, #614ad3, #e42c64);
  border-radius: 10px 10px 0 0;
  color: #fff;
  font-size: 20px;
}

.daily-income-table thead td:first-of-type {
  border-radius: 10px 0 0 0;
}

.daily-income-table thead td {
  color: white !important;
  text-align: center !important;
  font-size: 19px; /* Î±Ï…Î¾Î·Î¼Î­Î½Î¿ */
  padding: 22px 18px;
  letter-spacing: 0.5px;
}

#incomeTable tbody td {
  color: white !important;
  border-top: 1px solid #f0f0f0;
}

.daily-income-table tbody tr:hover {
  background: rgba(123, 153, 218, 0.1);
}

.daily-income-table button {
  background-color: rgba(20, 30, 40, 0.9); /* Î¯Î´Î¹Î¿ Î¼Îµ Ï€Î¯Ï„ÎµÏ‚ */
  color: #f8f8f8;
  padding: 20px 40px;                     /* Ï€Î¹Î¿ Î¼ÎµÎ³Î¬Î»Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ */
  font-size: 22px;                        /* Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ· Î³ÏÎ±Î¼Î¼Î±Ï„Î¿ÏƒÎµÎ¹ÏÎ¬ */
  font-family: 'Red Hat Display', sans-serif;
  font-weight: 600;
  border: none;
  border-radius: 16px;                    /* Î¯Î´Î¹Î¿ border-radius Î¼Îµ Ï€Î¯Ï„ÎµÏ‚ */
  box-shadow: 0 0 10px rgba(0,0,0,0.4);
  margin: 30px auto;
  display: block;
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.2s ease;
}

.daily-income-table button:hover {
  background-color: rgba(40, 60, 80, 1);   /* Ï€Î¹Î¿ Î­Î½Ï„Î¿Î½Î¿ ÏƒÏ„Î¿ hover */
  transform: scale(1.03);
}
#dailyStatsPage::after {
  content: "";
  display: block;
  height: 80px;
}
.daily-income-table table.threeDMode {
  transform: rotateX(65deg) rotateZ(-35deg);
  transition: transform 0.5s ease;
}
.daily-income-table thead td {
  color: white !important;
  text-align: center !important;
}
.fade-in {
  animation: fadeIn 1s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
#monthlyStatsPage {
  display: none;
  flex-direction: column;
  align-items: center;
  padding: 120px 20px 40px 40px;
  background: url('https://i.postimg.cc/dtcmdYYX/photo-1706029831385-1c89922848eb.jpg') no-repeat center center fixed;
  background-size: cover;
  position: relative;
  color: white;
  z-index: 0;
  scroll-behavior: smooth;
  width: 100%;
  height: 100vh;        /* âœ… Î£Ï„Î±Î¸ÎµÏÏŒ ÏÏˆÎ¿Ï‚ */
  overflow-y: auto;     /* âœ… Scroll Î¼Î­ÏƒÎ± ÏƒÏ„Î· ÏƒÎµÎ»Î¯Î´Î± */
}

.month-selector-wrapper {
  display: flex;
  justify-content: center;
  width: 100%;
  padding: 100px 0 20px; /* âœ… Ï€Î¹Î¿ ÎºÎ¬Ï„Ï‰ */
}

.month-selector {
  display: flex;
  flex-wrap: nowrap;
  justify-content: center;
  gap: 12px;
  background-color: rgba(0, 0, 0, 0.8); /* Î£ÎºÎ¿ÏÏÎ¿ Î·Î¼Î¹Î´Î¹Î±Ï†Î±Î½Î­Ï‚ */
  padding: 18px 24px;
  border-radius: 20px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
  overflow-x: auto;
}

.month-selector button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 14px 26px;
  font-size: 16px;
  font-weight: 600;
  border-radius: 12px;
  cursor: pointer;
  white-space: nowrap;
  box-shadow: 0 4px 10px rgba(0, 123, 255, 0.4);
  transition: background-color 0.3s ease, transform 0.2s ease;
}

.month-selector button:hover {
  background-color: #0056b3;
  transform: translateY(-2px);
}

.month-selector button.active {
  background-color: white;
  color: #007bff;
  font-weight: 700;
  box-shadow: 0 6px 16px rgba(255, 255, 255, 0.6);
}

#monthSelector button.active {
  background-color: #0056b3;
}

/* ğŸ¯ Î’ÎµÎ»Ï„Î¹Ï‰Î¼Î­Î½Î· Î¼Î¿ÏÏ†Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î³Î¹Î± Ï„Î¿ Î³ÏÎ¬Ï†Î·Î¼Î± Î™Î¿Ï…Î»Î¯Î¿Ï… */
#julyChartContainer {
  display: none;
  width: 90%;
  max-width: 1000px;
  margin: 60px auto;
  background: rgba(0, 0, 0, 0.5);              /* Ï€Î¹Î¿ ÏƒÎºÎ¿Ï…ÏÏŒÏ‡ÏÏ‰Î¼Î¿ ÎºÎ±Î¹ elegant */
  padding: 48px 40px;
  border-radius: 20px;
  box-shadow: 0 0 25px rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.08);
  transition: all 0.3s ease;
}

#julyChart {
  width: 100% !important;
  height: 420px !important;
  display: block;
  margin: 0 auto;
}
#secondChartContainer {
  width: 90%;
  max-width: 1000px;
  margin: 60px auto;
  background: rgba(0, 0, 0, 0.5);
  padding: 48px 40px;
  border-radius: 20px;
  box-shadow: 0 0 25px rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.08);
  transition: all 0.3s ease;
}

#secondChart {
  width: 100% !important;
  height: 420px !important;
  display: block;
  margin: 0 auto;
}

/* ÎœÎ®Î½Ï…Î¼Î± ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ·Ï‚ ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÏÎ½ */
#monthlyStatsPage p {
  text-align: center;
  font-size: 18px;
  margin-top: 40px;
  color: #e0e0e0;
}
#monthlyStatsPage::before {
  content: none !important;
}

#monthlyStatsPage {
  background-color: transparent !important;
  background-image: url('https://i.postimg.cc/dtcmdYYX/photo-1706029831385-1c89922848eb.jpg') !important;
  backdrop-filter: none !important;
  box-shadow: none !important;
}
#monthlyStatsPage .overlay {
  display: none !important;
}
.monthly-summary-box {
  margin-top: 40px;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.2);
  padding: 30px 40px;
  border-radius: 14px;
  color: white;
  font-family: 'Red Hat Display', sans-serif;
  font-size: 21px;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.25);
  backdrop-filter: blur(8px);

  /* âœ… Î Î»Î­Î³Î¼Î± 3x3 */
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 30px 40px;
  justify-items: center;
  align-items: center;
  text-align: center;
}

.monthly-summary-box strong {
  color: white;
  font-weight: 600;
}

.monthly-summary-box span {
  color: #9c27b0e6; /* Î¯Î´Î¹Î¿ Î¼Îµ Ï„Î¿ Î´Î¹Î¬Î³ÏÎ±Î¼Î¼Î± */
  font-weight: bold;
  text-shadow: 0 0 2px rgba(156, 39, 176, 0.9)/* Î¯Î´Î¹Î± Î»Î¬Î¼ÏˆÎ· Î¼Îµ Ï„Î¿ Ï‡ÏÏÎ¼Î± */
}

.summary-row {
  display: flex;
  justify-content: space-between;
  font-size: 18px;
}

.summary-row .label {
  color: white;
  font-weight: 500;
}

.summary-row .value {
  color: #00c8ff;
  font-weight: bold;
  text-align: right;
}
#julySummaryBox span {
  color: #00c8ff;
  text-shadow: 0 0 2px rgba(0, 200, 255, 0.6);
  font-weight: bold;
}


    
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>


<body>

  <div class="overlay"></div>

  <div class="topbar">
    <div class="dropdown" id="monthsDropdown">
      <button id="monthsToggle" class="dropbtn"><span>Î—Î¼ÎµÏÎ¿Î»ÏŒÎ³Î¹Î¿</span></button>
      <div class="dropdown-content" id="monthsMenu" ></div>
    </div>
    <button id="clearYearBtn" class="dropbtn"><span>ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÎˆÏ„Î¿Ï…Ï‚</span></button>
    <div class="dropdown">
      <button id="Statistics" class="dropbtn"><span>Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬</span></button>
<div id="statsDropdown" class="dropdown-content">
  <button data-view="daily">Î—Î¼ÎµÏÎ®ÏƒÎ¹Î±</button>
  <button data-view="monthly">Î•Ï„Î®ÏƒÎ¹Î±</button>
</div>
</div>

    <button class="dropbtn" id="exportCsvBtn"><span>Î•Î¾Î±Î³Ï‰Î³Î® CSV</span></button>
    <button class="dropbtn" id="todayBtn"><span>Î£Î®Î¼ÎµÏÎ±</span></button>
    <button id="homeButton" class="home-btn" title="Î‘ÏÏ‡Î¹ÎºÎ®">
      <!-- SVG Î³Î¹Î± Ï„Î¿ ÏƒÏ€Î¹Ï„Î¬ÎºÎ¹ -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30" fill="white">
        <path d="M12 3L2 12h3v8h4v-5h6v5h4v-8h3L12 3z"/>
      </svg>
    </button>
  </div>
<div id="monthlyStatsPage" style="display:none;">
  <div class="month-selector-wrapper">
    <div class="month-selector" id="monthSelector">
      <button data-month="1">Î™Î±Î½</button>
      <button data-month="2">Î¦ÎµÎ²</button>
      <button data-month="3">ÎœÎ±Ï</button>
      <button data-month="4">Î‘Ï€Ï</button>
      <button data-month="5">ÎœÎ¬Î¹</button>
      <button data-month="6">Î™Î¿Ï…Î½</button>
      <button data-month="7">Î™Î¿Ï…Î»</button>
      <button data-month="8">Î‘Ï…Î³</button>
      <button data-month="9">Î£ÎµÏ€</button>
      <button data-month="10">ÎŸÎºÏ„</button>
      <button data-month="11">ÎÎ¿Îµ</button>
      <button data-month="12">Î”ÎµÎº</button>
    </div>
  </div>

  <!-- âœ… Î‘Ï…Ï„ÏŒ Î­Î»ÎµÎ¹Ï€Îµ -->
<div id="monthlyStatsContent" style="text-align: center; margin-top: 80px;"></div>

<!-- Î“ÏÎ¬Ï†Î·Î¼Î± Î™Î¿Ï…Î»Î¯Î¿Ï… -->
<div id="julyChartContainer" style="display: none;">
  <canvas id="julyChart" width="2000" height="1000"></canvas>

  <!-- ğŸ“¦ Î Î»Î±Î¯ÏƒÎ¹Î¿ ÏƒÏ…Î½Î¿Î»Î¹ÎºÏÎ½ Ï„Î¹Î¼ÏÎ½ Î³Î¹Î± Î“ÏÎ¬Ï†Î·Î¼Î± Î™Î¿Ï…Î»Î¯Î¿Ï… -->
  <div id="julySummaryBox" class="monthly-summary-box"
       style="display: flex; flex-direction: row; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 40px; margin-top: 20px;">

    <!-- Î‘ÏÎ¹ÏƒÏ„ÎµÏÎ® ÏƒÏ„Î®Î»Î· -->
    <div style="display: flex; flex-direction: column; gap: 12px; flex: 1; align-items: flex-start; text-align: left;">
      <div><strong>ÎœÎ·Î½Î¹Î±Î¯Î± Î­ÏƒÎ¿Î´Î±:</strong> <span id="totalJulyIncome">0â‚¬</span></div>
      <div><strong>ÎšÎ±Î»ÏÏ„ÎµÏÎ· ÎµÎ²Î´Î¿Î¼Î¬Î´Î±:</strong> <span id="bestWeekLabel">-</span></div>
      <div><strong>Î•Ï„Î®ÏƒÎ¹Î± Î­ÏƒÎ¿Î´Î±:</strong> <span id="annualIncome">-</span></div>
    </div>

    <!-- Î”ÎµÎ¾Î¹Î¬ ÏƒÏ„Î®Î»Î· -->
    <div style="display: flex; flex-direction: column; gap: 12px; flex: 1; align-items: flex-end; text-align: right;">
      <div><strong>ÎšÎ±Î»ÏÏ„ÎµÏÎ¿Ï‚ Ï†ÎµÏ„Î¹Î½ÏŒÏ‚ Î¼Î®Î½Î±Ï‚:</strong> <span id="bestMonthLabel">-</span></div>
      <div id="incomeComparison" style="font-size: 18px; font-weight: bold;"></div>
      <div>
        <strong>ÎœÎ­Î³Î¹ÏƒÏ„Î· Î¼Î·Î½Î¹Î±Î¯Î± Î¼ÎµÏ„Î±Î²Î¿Î»Î®:</strong>
        <span id="maxGrowthMonth" style="font-weight: bold;">-</span>
      </div>
    </div>

  </div>
</div>
  <!-- ğŸ“Š Î”ÎµÏÏ„ÎµÏÎ¿ ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÏŒ Î³ÏÎ¬Ï†Î·Î¼Î± -->
<!-- ğŸ“Š Î”ÎµÏÏ„ÎµÏÎ¿ ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÏŒ Î³ÏÎ¬Ï†Î·Î¼Î± -->
<div id="secondChartContainer" style="display: block; margin-top: 80px;">
  <canvas id="secondChart" width="2000" height="1000"></canvas>

  <!-- ğŸ“¦ Î Î»Î±Î¯ÏƒÎ¹Î¿ ÏƒÏ…Î½Î¿Î»Î¹ÎºÏÎ½ Ï„Î¹Î¼ÏÎ½ ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ Ï„Î¿ Î³ÏÎ¬Ï†Î·Î¼Î± -->
<div id="monthlySummaryBox" class="monthly-summary-box">
  <!-- 1Î· Î£ÎµÎ¹ÏÎ¬ -->
  <div><strong>Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚:</strong> <span id="secondChartTotalEntries">0</span></div>
  <div><strong>Î£ÏÎ½Î¿Î»Î¿ Ï€ÎµÎ»Î±Ï„ÏÎ½:</strong> <span id="secondChartUniqueIds">0</span></div>
  <div><strong>ÎœÎ­ÏƒÎ¿Ï‚ ÏŒÏÎ¿Ï‚ Î¼Î®Î½Î±:</strong> <span id="secondChartMonthlyAverage">0</span></div>

  <!-- 2Î· Î£ÎµÎ¹ÏÎ¬ -->
  <div><strong>Î•Ï„Î®ÏƒÎ¹Î¿Î¹ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚:</strong> <span id="secondChartYearlyUniqueIds">0</span></div>
  <div><strong>ÎšÎ±Î»ÏÏ„ÎµÏÎ¿Ï‚ Ï†ÎµÏ„Î¹Î½ÏŒÏ‚ Î¼Î®Î½Î±Ï‚:</strong> <span id="secondChartBestMonth">-</span></div>
  <div><strong>Î†Î½Î´ÏÎµÏ‚:</strong> <span id="secondChartMaleCount">0</span></div>

  <!-- 3Î· Î£ÎµÎ¹ÏÎ¬ -->
  <div><strong>Î“Ï…Î½Î±Î¯ÎºÎµÏ‚:</strong> <span id="secondChartFemaleCount">0</span></div>
  <div><strong>Î¤Î±ÎºÏ„Î¹ÎºÎ¿Î¯ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚(%):</strong> <span id="secondChartReturningRate">0%</span></div>
  <div><strong>Îœ.ÎŸ. ÎºÎ±Ï„Î±Î³ÏÎ±Ï†ÏÎ½/ ID:</strong> <span id="secondChartAvgVisitsPerId">0</span></div>
</div>

</div>
</div>
</div>
<div id="dailyStatsPage" class="statistics-page" style="display: none;">
  <div class="daily-wrapper">
    <div class="daily-content">
      <h2>Î—Î¼ÎµÏÎ®ÏƒÎ¹Î± Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ ÎšÎ±Ï„Î±Î³ÏÎ±Ï†ÏÎ½</h2>
      <canvas id="dailyChart" width="2000" height="1000"></canvas>

      <div class="stat-box-container">
        <div id="peakHourBox" class="stat-box">
          <strong>Î Î¹Î¿ Ï€Î¿Î»Ï…ÏƒÏÏ‡Î½Î±ÏƒÏ„Î· ÏÏÎ±:</strong> <span id="peakHourValue">-</span>
        </div>
        <div id="totalEntriesBox" class="stat-box">
          <strong>Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ Î·Î¼ÎµÏÎ®ÏƒÎ¹ÎµÏ‚ ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚:</strong> <span id="totalEntriesValue">-</span>
        </div>
      </div>

      <div class="charts-row">
  <div class="chart circle" id="circle-1">
    <h2 class="title">Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ Î±Î½Î´ÏÏÎ½</h2>
    <div class="chart-svg align-center">
      <h2 class="circle-percentage">0%</h2>
      <svg class="chart-circle" id="chart-3" width="300" height="300" viewBox="0 0 100 100">
        <defs>
          <linearGradient id="gradient-male" x1="1" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#00f9ff"/>
            <stop offset="100%" stop-color="#00ff90"/>
          </linearGradient>
        </defs>
        <circle class="underlay" cx="50" cy="50" r="45" />
        <circle class="circle-overlay" cx="50" cy="50" r="45"
                stroke="url(#gradient-male)"
                stroke-width="5"
                fill="none"
                stroke-dasharray="282.6"
                stroke-dashoffset="282.6" />
      </svg>
    </div>
    <div class="triangle green"></div>
  </div>

  <div class="chart circle" id="circle-2">
    <h2 class="title">Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ Î³Ï…Î½Î±Î¹ÎºÏÎ½</h2>
    <div class="chart-svg align-center">
      <h2 class="circle-percentage">0%</h2>
      <svg class="chart-circle" id="chart-4" width="300" height="300" viewBox="0 0 100 100">
        <defs>
          <linearGradient id="gradient-female" x1="1" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#8e2de2"/>
            <stop offset="100%" stop-color="#4a00e0"/>
          </linearGradient>
        </defs>
        <circle class="underlay" cx="50" cy="50" r="45" />
        <circle class="circle-overlay" cx="50" cy="50" r="45"
                stroke="url(#gradient-female)"
                stroke-width="5"
                fill="none"
                stroke-dasharray="282.6"
                stroke-dashoffset="282.6" />
      </svg>
    </div>
    <div class="triangle red"></div>
  </div>
</div>

<div class="daily-income-table">
  <button class="toggle-3d">Î—Î¼ÎµÏÎ®ÏƒÎ¹Î± Î­ÏƒÎ¿Î´Î±:0</button>
  
<table id="incomeTable">
 <thead>
  <tr>
    <td>Î ÎµÎ»Î¬Ï„Î·Ï‚</td>
    <td>Î Î¿ÏƒÏŒ</td>
  </tr>
</thead>
  <tbody id="incomeTableBody">
  </tbody>
</table>
</div>

    </div>
  </div>
</div>

  <div class="content" class="content page" id="mainContent">
    <h1 id="neonText">
      <span>A</span><span>L</span><span>W</span><span>A</span><span>Y</span><span>S</span>&nbsp;
      <span>H</span><span>U</span><span>N</span><span>G</span><span>R</span><span>Y</span>&nbsp;
      <span>F</span><span>O</span><span>R</span>&nbsp;
      <span>M</span><span>O</span><span>R</span><span>E</span>
    </h1>
    <input type="text" id="qrInput" placeholder="Î£ÎºÎ¬Î½Î±ÏÎµ ÎµÎ´Ï..." autofocus />
    <div id="log" class="home-content"></div>
  </div>
  <div class="content" class="content page" id="weeksView">
    <h2 id="selectedMonthTitle">Î•Î²Î´Î¿Î¼Î¬Î´ÎµÏ‚</h2>
    <div class="weeks-grid" id="weeksDetails">
      <!-- Î•Î²Î´Î¿Î¼Î¬Î´ÎµÏ‚ Î¸Î± ÎµÎ¼Ï†Î±Î½Î¹ÏƒÏ„Î¿ÏÎ½ ÎµÎ´Ï -->
    </div>
  </div>

  <div class="content page" id="todayView">
    <h2 id="todayTitle">Î£Î®Î¼ÎµÏÎ±</h2>
    <div id="todayLog"></div>
  </div>
  <div class="content" class="content page"id="dayLogView" style="display: none;">
  <button id="backToWeeksBtn" style="position: absolute; top: 20px; left: 20px; font-size: 24px; background: none; border: none; color: white; cursor: pointer;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="40" height="40" fill="white">
    <path d="M13.59 6.59L8 12l5.59 5.59L12 19l-7-7 7-7 1.59 1.59z"/>
  </svg>
</button>
  <h2 id="dayLogTitle"></h2>
  <table style="width: 80%; max-width: 600px; background-color: rgba(0,0,0,0.6); border-collapse: collapse; border-radius: 10px; overflow: hidden; margin: auto;">
  <thead>
    <tr>
      <th style="padding: 10px; border-bottom: 1px solid white; text-align: center;">ÎŒÎ½Î¿Î¼Î±</th>
      <th style="padding: 10px; border-bottom: 1px solid white; text-align: center;">ÎÏÎ± ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î®Ï‚</th>
    </tr>
  </thead>
  <tbody id="dayLogTableBody" style="text-align: center;"></tbody>
</table>
</div>
</body>

<style>
/* ÎŸÏÎ¯Î¶Î¿Ï…Î¼Îµ Ï„Î¿ ÏÏˆÎ¿Ï‚ ÎºÎ±Î¹ Ï„Î· Î¸Î­ÏƒÎ· Ï„Î·Ï‚ ÎºÎ¿ÏÏ…Ï†Î±Î¯Î±Ï‚ Î¼Ï€Î¬ÏÎ±Ï‚ */
.topbar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 10px;
  z-index: 9999;
  display: flex;
  justify-content: center;
  gap: 20px;
  animation: fadeInDown 0.6s ease;
}
.topbar button:hover {
  background-color: #222;
}

/* Î¡Ï…Î¸Î¼Î¯Î¶Î¿Ï…Î¼Îµ Ï„Î¿ ÏÏˆÎ¿Ï‚ Ï„Î·Ï‚ ÎºÏÏÎ¹Î±Ï‚ Ï€ÎµÏÎ¹ÎµÏ‡Î¿Î¼Î­Î½Î¿Ï… */
.content {
  margin-top: 70px; /* Î‘Ï†Î®Î½Î¿Ï…Î¼Îµ Ï‡ÏÏÎ¿ Î³Î¹Î± Ï„Î· Î¼Ï€Î¬ÏÎ± */
  overflow: auto;
  padding: 20px;
}

/* Î— Ï€ÎµÏÎ¹Î¿Ï‡Î® Ï€Î¿Ï… Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ Ï„Î¹Ï‚ ÎµÎ²Î´Î¿Î¼Î¬Î´ÎµÏ‚ */
.weeks-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* 2 ÎµÎ²Î´Î¿Î¼Î¬Î´ÎµÏ‚ Î´Î¯Ï€Î»Î±-Î´Î¯Ï€Î»Î± */
  gap: 20px; /* ÎšÎµÎ½ÏŒ Î±Î½Î¬Î¼ÎµÏƒÎ± ÏƒÏ„Î¹Ï‚ ÎµÎ²Î´Î¿Î¼Î¬Î´ÎµÏ‚ */
  margin-top: 20px;
  overflow-y: auto; /* Î‘Î½ Ï„Î¿ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ Î¾ÎµÏ€ÎµÏÎ½Î¬ Ï„Î·Î½ Î¿Î¸ÏŒÎ½Î·, Î½Î± Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î³Î¯Î½ÎµÎ¹ ÎºÏÎ»Î¹ÏƒÎ· */
  max-height: 80vh; /* ÎŒÏÎ¹Î¿ ÏÏˆÎ¿Ï…Ï‚ Î³Î¹Î± Ï„Î¿ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ */
}

/* ÎŸÎ¹ ÎµÎ²Î´Î¿Î¼Î¬Î´ÎµÏ‚ Î¼Îµ Ï„Î¿ Î¼Î±ÏÏÎ¿ ÎºÎ¿Ï…Ï„Î¬ÎºÎ¹ */
.week-container {
  background-color: rgba(0, 0, 0, 0.7); /* ÎœÎ±ÏÏÎ¿ Ï†ÏŒÎ½Ï„Î¿ */
  padding: 15px;
  border-radius: 8px;
  color: white; /* Î›ÎµÏ…ÎºÎ¬ Î³ÏÎ¬Î¼Î¼Î±Ï„Î± */
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.week-container h3 {
  text-align: center;
  margin-bottom: 10px;
  font-size: 18px;
}

/* ÎŸÎ¹ Î¼Î­ÏÎµÏ‚ Î³Î¹Î± ÎºÎ¬Î¸Îµ ÎµÎ²Î´Î¿Î¼Î¬Î´Î± */
.week-days-container {
  background-color: rgba(0, 0, 0, 0.8); /* ÎœÎ±ÏÏÎ¿ Î´Î¹Î¬Ï†Î±Î½Î¿ Ï†ÏŒÎ½Ï„Î¿ Î³Î¹Î± Ï„Î¹Ï‚ Î·Î¼Î­ÏÎµÏ‚ */
  padding: 10px;
  border-radius: 5px;
  display: flex;
  flex-direction: column; /* ÎšÎ±Ï„Î±ÎºÏŒÏÏ…Ï†Î· Î´Î¹Î¬Ï„Î±Î¾Î· */
  gap: 10px;
  justify-content: center;
  align-items: center;
}

.day-box {
  background-color: black;
  color: white;
  padding: 10px;
  border-radius: 5px;
  font-size: 16px;
  text-align: center;
  width: 100%;
  margin-bottom: 5px;
}

/* Î¡Ï…Î¸Î¼Î¯Î¶Î¿Ï…Î¼Îµ Ï„Î¿ Î¼Î®ÎºÎ¿Ï‚ Ï„Ï‰Î½ ÎµÎ²Î´Î¿Î¼Î¬Î´Ï‰Î½ ÎºÎ±Î¹ Ï„Ï‰Î½ Î·Î¼ÎµÏÏÎ½ */
.week-container .week-days-container .day-box {
  width: auto; /* Î¤Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ Ï„Î¿Ï… ÎºÎ¿Ï…Ï„Î¹Î¿Ï Î½Î± ÎµÎ¯Î½Î±Î¹ Î±Ï…Ï„ÏŒ Ï€Î¿Ï… Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î³Î¹Î± Ï„Î·Î½ Î·Î¼Î­ÏÎ± */
}

/* Î ÎµÏÎ¹Î¿ÏÎ¯Î¶Î¿Ï…Î¼Îµ Ï„Î¿ ÏÏˆÎ¿Ï‚ Ï„Î·Ï‚ ÏƒÎµÎ»Î¯Î´Î±Ï‚ */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

/* Î•Ï€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÎºÏÎ»Î¹ÏƒÎ· Î¼ÏŒÎ½Î¿ Î±Î½ Ï„Î¿ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ Î¾ÎµÏ€ÎµÏÎ½Î¬ Ï„Î·Î½ Î¿Î¸ÏŒÎ½Î· */
body {
  overflow: hidden;
}

.content {
  overflow-y: scroll;
  max-height: calc(100vh - 70px); /* ÎŒÏÎ¹Î¿ ÏÏˆÎ¿Ï…Ï‚ Î³Î¹Î± Î½Î± Î¼Î·Î½ Î¾ÎµÏ€ÎµÏÎ½Î¬ Ï„Î·Î½ Î¿Î¸ÏŒÎ½Î· */
}
</style>
<script>

let todayDate = new Date().toISOString().slice(0, 10);
let storedLog = JSON.parse(localStorage.getItem("logToday"));

if (storedLog && storedLog.date === todayDate) {
  logToday = storedLog;
} else {
  logToday = {
    date: todayDate,
    entries: []
  };
  saveLogData(); // Î£ÏÏƒÎµ Î½Î­Î¿ log Î³Î¹Î± ÏƒÎ®Î¼ÎµÏÎ±
}
if (!logToday || !logToday.entries) {
  logToday = {
    date: new Date().toLocaleDateString("el-GR"),
    entries: []
  };
}

updateTotalEntriesBox();  // âœ… Î•Î¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ Ï„Î¹Ï‚ ÏƒÎ·Î¼ÎµÏÎ¹Î½Î­Ï‚ ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚ ÏƒÏ‰ÏƒÏ„Î¬ Î¼ÎµÏ„Î¬ Ï„Î¿ refresh
updateGenderPercentages();

// Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î±Ï€ÏŒ Ï„Î¿ localStorage Î³Î¹Î± Ï„Î· ÏƒÎ·Î¼ÎµÏÎ¹Î½Î® Î·Î¼Î­ÏÎ±
const storedData = JSON.parse(localStorage.getItem("logToday"));

if (storedData && storedData.date === logToday.date) {
  logToday = storedData;
} else {
  saveLogData(); // Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î½Î­Î¿Ï… Î¬Î´ÎµÎ¹Î¿Ï… Î±Î½Ï„Î¹ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î³Î¹Î± ÏƒÎ®Î¼ÎµÏÎ±
}

  const monthsMenu = document.getElementById("monthsMenu");
  const dropdown = document.getElementById("monthsDropdown");
  const qrInput = document.getElementById("qrInput");
  const fullText = "Î£ÎºÎ¬Î½Î±ÏÎµ ÎµÎ´Ï...";
    let interval;

    function animatePlaceholder() {
      let eraseIndex = fullText.length;

      // 1. Î”Î¹Î±Î³ÏÎ±Ï†Î® Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÏ‰Î½
      const erase = setInterval(() => {
        const input = document.querySelector('input');
if (!input) return; // Î‘Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ input, Î´ÎµÎ½ ÎºÎ¬Î½Î¿Ï…Î¼Îµ Ï„Î¯Ï€Î¿Ï„Î±
input.placeholder = fullText.substring(0, eraseIndex);
        eraseIndex--;

        if (eraseIndex < 0) {
          clearInterval(erase);

          // 2. Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÏ‰Î½
          let typeIndex = 0;
          const type = setInterval(() => {
            input.placeholder = fullText.substring(0, typeIndex + 1);
            typeIndex++;

            if (typeIndex === fullText.length) {
              clearInterval(type);
            }
          }, 100);
        }
      }, 50);
    }

    // Î ÏÏÏ„Î¿ ÎºÎ¬Î»ÎµÏƒÎ¼Î±
    animatePlaceholder();

    // Î•Ï€Î±Î½Î¬Î»Î·ÏˆÎ· ÎºÎ¬Î¸Îµ 8 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
    setInterval(() => {
      animatePlaceholder();
    }, 8000);
  const logContainer = document.getElementById("log");
  const mainContent = document.getElementById("mainContent");
  const weeksView = document.getElementById("weeksView");
  const todayView = document.getElementById("todayView");
  const selectedMonthTitle = document.getElementById("selectedMonthTitle");
  const todayLog = document.getElementById("todayLog");
  const weeksDetails = document.getElementById("weeksDetails");

  const months = ["Î™Î±Î½Î¿Ï…Î¬ÏÎ¹Î¿Ï‚", "Î¦ÎµÎ²ÏÎ¿Ï…Î¬ÏÎ¹Î¿Ï‚", "ÎœÎ¬ÏÏ„Î¹Î¿Ï‚", "Î‘Ï€ÏÎ¯Î»Î¹Î¿Ï‚", "ÎœÎ¬Î¹Î¿Ï‚", "Î™Î¿ÏÎ½Î¹Î¿Ï‚", "Î™Î¿ÏÎ»Î¹Î¿Ï‚", "Î‘ÏÎ³Î¿Ï…ÏƒÏ„Î¿Ï‚", "Î£ÎµÏ€Ï„Î­Î¼Î²ÏÎ¹Î¿Ï‚", "ÎŸÎºÏ„ÏÎ²ÏÎ¹Î¿Ï‚", "ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿Ï‚", "Î”ÎµÎºÎ­Î¼Î²ÏÎ¹Î¿Ï‚"];
  const statsBtn = document.getElementById("Statistics");
const dropDown = document.getElementById("statsDropdown");

statsBtn.addEventListener("click", () => {
  dropDown.classList.toggle("show");
});

// Optional: ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ dropdown ÏŒÏ„Î±Î½ ÎºÎ¬Î½ÎµÎ¹Ï‚ ÎºÎ»Î¹Îº Î­Î¾Ï‰
window.addEventListener("click", (e) => {
  if (!statsBtn.contains(e.target) && !dropDown.contains(e.target)) {
    dropDown.classList.remove("show");
  }
});

// Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎµÏ€Î¹Î»Î¿Î³Î®Ï‚ view
dropDown.addEventListener("click", (e) => {
  if (e.target.tagName === "A") {
    const selectedView = e.target.dataset.view;
    console.log("Î•Ï€Î¹Î»Î­Ï‡Î¸Î·ÎºÎµ Ï€ÏÎ¿Î²Î¿Î»Î®:", selectedView);
    // ÎšÎ¬Î½Îµ ÎºÎ¬Ï„Î¹ Î±Î½Î¬Î»Î¿Î³Î± Î¼Îµ Ï„Î·Î½ ÎµÏ€Î¹Î»Î¿Î³Î® (Ï€.Ï‡. ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÏÎ½)
    dropDown.classList.remove("show");
  }
});


  function getPeriod(hour) {
  if (hour >= 0 && hour < 9) return "Î†ÎºÏ…ÏÎ· ÎÏÎ±"; // Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ
  if (hour >= 9 && hour < 12) return "Î ÏÏ‰Î¯";
  if (hour >= 12 && hour < 18) return "ÎœÎµÏƒÎ·Î¼Î­ÏÎ¹";
  if (hour >= 18 && hour <= 23) return "Î’ÏÎ¬Î´Ï…";
  return "Î†ÎºÏ…ÏÎ· ÎÏÎ±";
}

  function hideAllViews() {
    mainContent.style.display = "none";
    weeksView.style.display = "none";
    todayView.style.display = "none";
  }


  function closeDropdown() {
    dropdown.classList.remove("open");
  }

  function renderWeeksWithDates(monthName) {
    const year = new Date().getFullYear();
    const monthIndex = months.indexOf(monthName); // 0-based index
    const dates = [];

    const daysInMonth = new Date(year, monthIndex + 1, 0).getDate();

    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, monthIndex, day);
      dates.push({
        weekday: date.toLocaleDateString("el-GR", { weekday: 'long' }),
        dateStr: date.toLocaleDateString("el-GR"),
        weekNumber: Math.floor((day - 1) / 7) + 1
      });
    }

    const groupedWeeks = {};
    dates.forEach(d => {
      const week = d.weekNumber;
      if (!groupedWeeks[week]) groupedWeeks[week] = [];
      groupedWeeks[week].push(d);
    });

    weeksDetails.innerHTML = ''; // Clear previous content
    Object.entries(groupedWeeks).forEach(([week, days]) => {
      const weekDiv = document.createElement("div");
      weekDiv.classList.add('week-container');

      // Add "Î•Î²Î´Î¿Î¼Î¬Î´Î± x"
      const weekTitle = document.createElement("h3");
      weekTitle.textContent = `Î•Î²Î´Î¿Î¼Î¬Î´Î± ${week}`;
      weekDiv.appendChild(weekTitle);

      // Add the days inside the week
      const daysContainer = document.createElement("div");
      daysContainer.classList.add('week-days');
      days.forEach(d => {
        const dayDiv = document.createElement("div");
        dayDiv.classList.add('day-box');
dayDiv.innerHTML = `<button class="day-btn" data-date="${d.dateStr}" data-weekday="${capitalizeFirstLetter(d.weekday)}">${capitalizeFirstLetter(d.weekday)} - ${d.dateStr}</button>`;
        daysContainer.appendChild(dayDiv);
      });
      weekDiv.appendChild(daysContainer);

      weeksDetails.appendChild(weekDiv);
    });
  }

  function capitalizeFirstLetter(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  }

  document.getElementById("monthsToggle").addEventListener("click", () => {
    dropdown.classList.toggle("open");
  });

  months.forEach(month => {
    const btn = document.createElement("button");
    btn.textContent = month;
    btn.onclick = () => {
      dropdown.classList.remove("open");
      setTimeout(() => {
        hideAllViews();
        weeksView.style.display = "flex";
        selectedMonthTitle.textContent = `Î•Î²Î´Î¿Î¼Î¬Î´ÎµÏ‚ - ${month}`;
        renderWeeksWithDates(month);
weeksDetails.addEventListener("click", function(e) {
if (e.target.matches(".day-btn")) {
  const selectedDate = e.target.dataset.date;
  const weekday = e.target.dataset.weekday;
  showDayLog(selectedDate, weekday);
}
});
      }, 300);
    };
    monthsMenu.appendChild(btn);
  });

  document.getElementById("homeButton").addEventListener("click", () => {
  hideAllViews();

  // Î•Ï†Î±ÏÎ¼ÏŒÎ¶Î¿Ï…Î¼Îµ animation ÏƒÏ„Î·Î½ Î±ÏÏ‡Î¹ÎºÎ®
  mainContent.classList.remove("animate-home"); // Î“Î¹Î± Î½Î± ÎµÏ€Î±Î½Î±Î»Î¬Î²ÎµÎ¹ Ï„Î¿ animation
  void mainContent.offsetWidth; // Force reflow
  mainContent.classList.add("animate-home");

  mainContent.style.display = "block";  // Î•Ï€Î¹ÏƒÏ„ÏÎ­Ï†Î¿Ï…Î¼Îµ ÏƒÏ„Î¿ Î±ÏÏ‡Î¹ÎºÏŒ Î¼ÎµÎ½Î¿Ï
  qrInput.focus();  // Î•Ï€Î¹ÏƒÏ„ÏÎ­Ï†Î¿Ï…Î¼Îµ Ï„Î¿ focus ÏƒÏ„Î¿ Ï€ÎµÎ´Î¯Î¿ ÎµÎ¹ÏƒÎ±Î³Ï‰Î³Î®Ï‚

  document.body.style.backgroundImage = "url('https://i.postimg.cc/025nj58G/processed-2-DA30989-5818-4-DF0-A5-A1-A9-A04-F93091-B.jpg')";
  document.body.classList.remove('show-day-background');
  dayLogView.style.display = "none";
});

document.getElementById("todayBtn").addEventListener("click", () => {
  hideAllViews();
  todayView.style.display = "flex";
  document.getElementById("dayLogView").style.display = "none";
  todayLog.innerHTML = "";
    console.log("ğŸ“¦ logToday.entries =", logToday.entries);


  const grouped = { Î ÏÏ‰Î¯: [], ÎœÎµÏƒÎ·Î¼Î­ÏÎ¹: [], Î’ÏÎ¬Î´Ï…: [] };
  logToday.entries.forEach(entry => {
  if (grouped[entry.period]) {
    grouped[entry.period].push(entry);
  } else {
    console.warn("âŒ Î†Î³Î½Ï‰ÏƒÏ„Î¿ period:", entry.period, entry);
  }
});

  ["Î ÏÏ‰Î¯", "ÎœÎµÏƒÎ·Î¼Î­ÏÎ¹", "Î’ÏÎ¬Î´Ï…"].forEach(period => {
    if (grouped[period].length) {
      const h3 = document.createElement("h3");
      h3.textContent = period;
      todayLog.appendChild(h3);

      const table = document.createElement("table");
      table.style.width = "100%";
      table.style.backgroundColor = "rgba(0, 0, 0, 0.6)";
      table.style.borderCollapse = "collapse";
      table.style.borderRadius = "10px";
      table.style.overflow = "hidden";

      const thead = document.createElement("thead");
      const headerRow = document.createElement("tr");
     const nameHeader = document.createElement("th");
nameHeader.textContent = "ÎŒÎ½Î¿Î¼Î±";
nameHeader.style.padding = "10px";
nameHeader.style.borderBottom = "1px solid white";
nameHeader.style.textAlign = "center"; // âœ… Ï€ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹Ï‚ Î±Ï…Ï„ÏŒ

const timeHeader = document.createElement("th");
timeHeader.textContent = "ÎÏÎ± ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î®Ï‚";
timeHeader.style.padding = "10px";
timeHeader.style.borderBottom = "1px solid white";
timeHeader.style.textAlign = "center"; // âœ… Ï€ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹Ï‚ Î±Ï…Ï„ÏŒ

      headerRow.appendChild(nameHeader);
      headerRow.appendChild(timeHeader);
      thead.appendChild(headerRow);
      table.appendChild(thead);

     const tbody = document.createElement("tbody");
     grouped[period].forEach(entry => {
  const row = document.createElement("tr");

 const nameCell = document.createElement("td");
nameCell.textContent = entry.name;
nameCell.style.padding = "10px";
nameCell.style.textAlign = "center"; // âœ… Ï€ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹Ï‚ Î±Ï…Ï„ÏŒ

const timeCell = document.createElement("td");
timeCell.textContent = entry.time;
timeCell.style.padding = "10px";
timeCell.style.textAlign = "center"; // âœ… Ï€ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹Ï‚ Î±Ï…Ï„ÏŒ

  row.appendChild(nameCell);
  row.appendChild(timeCell);
  tbody.appendChild(row);
});

      table.appendChild(tbody);
      table.classList.add("fade-in");
      todayLog.appendChild(table);
    }
  });
});
document.getElementById("qrInput").addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    const qrInput = document.getElementById("qrInput");
    const qrText = qrInput.value.trim();
    if (!qrText) return;

    // âœ¨ Î‘Î½Î¬Î»Ï…ÏƒÎ· QR ÏƒÎµ ID;NAME;GENDER
    const parts = qrText.split(";");
    if (parts.length !== 3) {
      alert("âŒ Î‘Î»Î»Î¬Î¾Ï„Îµ Ï„Î·Î½ Î³Î»ÏÏƒÏƒÎ± Ï€Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³Î¯Î¿Ï… ÏƒÏ„Î± Î‘Î³Î³Î»Î¹ÎºÎ¬");
      qrInput.value = "";
      return;
    }

    const [rawId, rawName, rawGender] = parts;

    const id = rawId.replace(/^ID=/i, "").trim();
    const name = rawName.replace(/^NAME=/i, "").trim().toUpperCase();
    const gender = rawGender.replace(/^GENDER=/i, "").trim().toUpperCase();

    const now = new Date();
    const hour = now.getHours();
    const minutes = now.getMinutes().toString().padStart(2, "0");
    const time = `${hour}:${minutes}`;
    const dateStr = now.toLocaleDateString("el-GR");
    const dayPeriod = getPeriod(hour);

    // â• ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î® Î³Î¹Î± Ï„Î¿ "Î£Î®Î¼ÎµÏÎ±"
    logToday.entries.push({ id, name, gender, period: dayPeriod, time });
    updateTotalEntriesBox();
    updateGenderPercentages();
    saveLogData();

    // â• ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î® ÏƒÏ„Î± mockData Î³Î¹Î± Ï„Î·Î½ Î—Î¼Î­ÏÎ±
    if (!mockData[dateStr]) mockData[dateStr] = [];

let alreadyScannedRecently = false;

// ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ Ï„Î¿ Î¯Î´Î¹Î¿ ID Î­Ï‡ÎµÎ¹ Î¾Î±Î½Î±ÎºÎ±Ï„Î±Î³ÏÎ±Ï†ÎµÎ¯ ÏƒÎ®Î¼ÎµÏÎ±
for (let entry of mockData[dateStr]) {
  if (entry.id === id) {
    const [prevHour, prevMin] = entry.time.split(":").map(Number);
    const prevTime = new Date();
    prevTime.setHours(prevHour, prevMin, 0, 0);

    const diffMs = now - prevTime;
    const diffHours = diffMs / (1000 * 60 * 60);
    if (diffHours < 5) {
      alreadyScannedRecently = true;
      break;
    }
  }
}

if (!alreadyScannedRecently) {
  mockData[dateStr].push({ id, name, gender, time });
  saveData();
}

    // ğŸ”„ ÎšÎ±Î¸Î¬ÏÎ¹ÏƒÎ¼Î± input
    qrInput.value = "";
    qrInput.focus();

    // âŒ Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Î¼Î·Î½ÏÎ¼Î±Ï„Î¿Ï‚ "ÎšÎ±Î¼Î¯Î± ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î®"
    const noEntriesMessage = document.querySelector("#todayLog p");
    if (logToday.entries.length > 0 && noEntriesMessage) {
      noEntriesMessage.remove();
    }

    // ğŸ” Î‘Î½Î±Î½ÎµÏÎ½Î¿Ï…Î¼Îµ Ï€Î¯Ï„Î±/Î³ÏÎ¬Ï†Î·Î¼Î± (Î±Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹)
    renderDailyChart?.();

    // ğŸ” Î‘Î½Î±Î½ÎµÏÎ½Î¿Ï…Î¼Îµ ÎºÎ±Î¹ Ï„Î¿ Î´ÎµÏÏ„ÎµÏÎ¿ Î³ÏÎ¬Ï†Î·Î¼Î± Î±Î½ ÎµÎ¯Î½Î±Î¹ Î¿ÏÎ±Ï„ÏŒ
    // ğŸ” Î‘Î½Î±Î½ÎµÏÎ½Î¿Ï…Î¼Îµ ÎºÎ±Î¹ Ï„Î¿ Î´ÎµÏÏ„ÎµÏÎ¿ Î³ÏÎ¬Ï†Î·Î¼Î± Î¼Îµ Ï„Î¿Î½ ÏƒÏ‰ÏƒÏ„ÏŒ Î¼Î®Î½Î±
const activeMonthBtn = document.querySelector('#monthSelector button.active');
const monthToRedraw = activeMonthBtn ? parseInt(activeMonthBtn.dataset.month, 10)
                                    : (new Date().getMonth() + 1);
drawSecondChart(monthToRedraw);
  }
});

function saveData() {
localStorage.setItem("attendanceData", JSON.stringify(mockData));
}
//const dayLogView = document.getElementById("dayLogView");
const dayLogTitle = document.getElementById("dayLogTitle");
const dayLogTableBody = document.getElementById("dayLogTableBody");
const backToWeeksBtn = document.getElementById("backToWeeksBtn");

// Î ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î¬ Î´ÎµÎ´Î¿Î¼Î­Î½Î± (Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±)
// ÎœÏŒÎ½Î¹Î¼Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î±Ï€ÏŒ localStorage Î® Î¾ÎµÎºÎ¯Î½Î·Î¼Î± Î±Ï€ÏŒ ÎºÎµÎ½ÏŒ
let mockData = JSON.parse(localStorage.getItem("attendanceData")) || {};

// âœ… Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· mock ÎµÏƒÏŒÎ´Ï‰Î½ Î™Î¿Ï…Î½Î¯Î¿Ï… (Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î®Î´Î·)
if (!mockData["5/6/2025"]) {
  mockData["5/6/2025"] = [
    { id: "999", name: "Î”Î¿ÎºÎ¹Î¼Î®", gender: "male", time: "10:00", type: "income", amount: "30" }
  ];
}
if (!mockData["12/6/2025"]) {
  mockData["12/6/2025"] = [
    { id: "888", name: "Î¤ÎµÏƒÏ„", gender: "female", time: "14:00", type: "income", amount: "45.50" }
  ];
}
if (!mockData["27/6/2025"]) {
  mockData["27/6/2025"] = [
    { id: "777", name: "Mock", gender: "male", time: "18:00", type: "income", amount: "60" }
  ];
}

backToWeeksBtn.addEventListener("click", () => {
console.log("Î Î¯ÏƒÏ‰ Ï€Î±Ï„Î®Î¸Î·ÎºÎµ!"); 
dayLogView.style.display = "none";
weeksView.style.display = "flex";
dayLogTitle.textContent="";
dayLogTableBody.innerHTML="";
});

  function renderLog() {
    logContainer.innerHTML = "";
    logToday.forEach(entry => {
      const div = document.createElement("div");
      div.className = "log-entry";
      div.innerHTML = `<span class="checkmark">âœ…</span> ${entry.name}`;
      logContainer.appendChild(div);
    });
  }


const todayStr = new Date().toISOString().slice(0, 10);
if (logToday.date !== todayStr) {
  logToday = {
    date: todayStr,
    entries: []
  };
  saveLogData();
  console.log("ğŸ•› ÎšÎ±Î¸Î±ÏÎ¯ÏƒÏ„Î·ÎºÎµ Ï„Î¿ logToday Î³Î¹Î±Ï„Î¯ Î®Ï„Î±Î½ Ï€Î±Î»Î¹Î¬Ï‚ Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±Ï‚.");
}
setInterval(() => {
  const todayStr = new Date().toISOString().slice(0, 10);
  if (logToday.date !== todayStr) {
    logToday.date = todayStr;
    logToday.entries = [];
    saveLogData();
    console.log("ğŸ•› ÎÎ­Î± Î·Î¼Î­ÏÎ± - ÎšÎ±Î¸Î±ÏÎ¯ÏƒÏ„Î·ÎºÎµ Ï„Î¿ ÏƒÎ·Î¼ÎµÏÎ¹Î½ÏŒ log.");

    // ğŸ§¾ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï€Î¯Î½Î±ÎºÎ± Î·Î¼ÎµÏÎ·ÏƒÎ¯Ï‰Î½ ÎµÏƒÏŒÎ´Ï‰Î½
    const tbody = document.getElementById("incomeTableBody");
    if (tbody) {
      tbody.innerHTML = "";
      console.log("ğŸ§¾ Î Î¯Î½Î±ÎºÎ±Ï‚ incomeTableBody ÎºÎ±Î¸Î±ÏÎ¯ÏƒÏ„Î·ÎºÎµ");
    }

    // ğŸ’¶ ÎœÎ·Î´ÎµÎ½Î¹ÏƒÎ¼ÏŒÏ‚ ÏƒÏ…Î½Î¿Î»Î¹ÎºÎ¿Ï Ï€Î¿ÏƒÎ¿Ï
    const label = document.querySelector(".toggle-3d");
    if (label) {
      label.textContent = "Î—Î¼ÎµÏÎ®ÏƒÎ¹Î± Î­ÏƒÎ¿Î´Î±: 0 â‚¬";
      console.log("ğŸ’¶ ÎœÎ·Î´ÎµÎ½Î¯ÏƒÏ„Î·ÎºÎµ Ï„Î¿ ÏƒÏÎ½Î¿Î»Î¿ Ï„Ï‰Î½ ÎµÏƒÏŒÎ´Ï‰Î½");
    }

    // ğŸ“‰ ÎœÎ·Î´ÎµÎ½Î¹ÏƒÎ¼ÏŒÏ‚ Ï€Î¿ÏƒÎ¿ÏƒÏ„ÏÎ½ Ï†ÏÎ»Î¿Ï…
    updateGenderPieCharts(0, 0);
    console.log("ğŸ“‰ Î Î¯Ï„ÎµÏ‚ Ï€Î¿ÏƒÎ¿ÏƒÏ„ÏÎ½ Î¼Î·Î´ÎµÎ½Î¯ÏƒÏ„Î·ÎºÎ±Î½");
  }
}, 60000);

function showDayLog(dateStr, weekday) {
  hideAllViews();  // ÎšÏÏÎ²Î¿Ï…Î¼Îµ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ Î¬Î»Î»ÎµÏ‚ Ï€ÏÎ¿Î²Î¿Î»Î­Ï‚

  // ÎŸÏÎ¯Î¶Î¿Ï…Î¼Îµ Ï„Î¿ Ï†ÏŒÎ½Ï„Î¿ Ï„Î·Ï‚ ÏƒÎµÎ»Î¯Î´Î±Ï‚ Î³Î¹Î± Ï„Î·Î½ Î·Î¼Î­ÏÎ±
  document.body.style.backgroundImage = "url('https://i.postimg.cc/fTzz0MNw/IMG-4164.jpg')";
  document.body.classList.add('show-day-background');

  dayLogView.style.display = "flex";
  dayLogTitle.textContent = `${capitalizeFirstLetter(weekday)} - ${dateStr}`;

  const tbody = dayLogTableBody;
  tbody.innerHTML = "";

  const logs = (mockData[dateStr] || []).filter(log => log.type !== "income"); // ğŸ›‘ Î¦Î¹Î»Ï„ÏÎ¬ÏÎ¿Ï…Î¼Îµ!

  logs.forEach(log => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td style="padding: 10px; border-bottom: 1px solid #ccc;">${log.name}</td>
      <td style="padding: 10px; border-bottom: 1px solid #ccc;">${log.time}</td>
    `;
    tbody.appendChild(row);
  });

}

function saveLogData() {
  localStorage.setItem("logToday", JSON.stringify(logToday));}


document.getElementById("clearYearBtn").addEventListener("click", () => {
  if (confirm("Î•Î¯ÏƒÏ„Îµ ÏƒÎ¯Î³Î¿Ï…ÏÎ¿Î¹ ÏŒÏ„Î¹ Î¸Î­Î»ÎµÏ„Îµ Î½Î± ÎºÎ±Î¸Î±ÏÎ¯ÏƒÎµÏ„Îµ ÏŒÎ»Î± Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï„Î¿Ï… Î­Ï„Î¿Ï…Ï‚;")) {
    // ğŸ”„ ÎœÎ·Î´ÎµÎ½Î¹ÏƒÎ¼ÏŒÏ‚ mockData ÎºÎ±Î¹ logToday
    mockData = {};
    logToday = { date: new Date().toLocaleDateString("el-GR"), entries: [] };

    // ğŸ”„ ÎœÎ·Î´ÎµÎ½Î¹ÏƒÎ¼ÏŒÏ‚ localStorage
    localStorage.removeItem("attendanceData");
    localStorage.removeItem("logToday");

    // âœ… Î‘Î½Î±Î½Î­Ï‰ÏƒÎ· Ï„Î·Ï‚ Ï€ÏÎ¿Î²Î¿Î»Î®Ï‚ 'Î£Î®Î¼ÎµÏÎ±'
    const todayLog = document.getElementById("todayLog");
    if (todayLog) {
      todayLog.innerHTML = "";
      const noEntriesMessage = document.createElement("p");
      noEntriesMessage.textContent = "Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚ Î³Î¹Î± ÏƒÎ®Î¼ÎµÏÎ±.";
      todayLog.appendChild(noEntriesMessage);
    }

    // âœ… Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î³ÏÎ±Ï†Î·Î¼Î¬Ï„Ï‰Î½ ÎºÎ±Î¹ ÏƒÏ…Î½Î¿Ï€Ï„Î¹ÎºÏÎ½ box
    if (typeof drawJulyChart === "function") drawJulyChart();
    if (typeof drawSecondChart === "function") drawSecondChart(new Date().getMonth() + 1);

    // âœ… ÎœÎ·Î´ÎµÎ½Î¹ÏƒÎ¼ÏŒÏ‚ ÏƒÏ…Î½Î¿Ï€Ï„Î¹ÎºÏÎ½ Ï„Î¹Î¼ÏÎ½ Î³ÏÎ±Ï†Î®Î¼Î±Ï„Î¿Ï‚ Î™Î¿Ï…Î»Î¯Î¿Ï…
    document.getElementById("totalJulyIncome").textContent = "0â‚¬";
    document.getElementById("bestWeekLabel").textContent = "-";
    document.getElementById("annualIncome").textContent = "-";
    document.getElementById("totalAnnualClients").textContent = "0";
    document.getElementById("bestMonthLabel").textContent = "-";
    document.getElementById("incomeComparison").textContent = "";
    document.getElementById("maxGrowthMonth").textContent = "-";

    // âœ… ÎœÎ·Î´ÎµÎ½Î¹ÏƒÎ¼ÏŒÏ‚ ÏƒÏ…Î½Î¿Ï€Ï„Î¹ÎºÏÎ½ Ï„Î¹Î¼ÏÎ½ ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ Î´ÎµÏÏ„ÎµÏÎ¿ Î³ÏÎ¬Ï†Î·Î¼Î±
    document.getElementById("secondChartTotalEntries").textContent = "0";
    document.getElementById("secondChartUniqueIds").textContent = "0";
    document.getElementById("secondChartMonthlyAverage").textContent = "0";
    document.getElementById("secondChartBestMonth").textContent = "0";
    document.getElementById("secondChartMaleCount").textContent = "0";
    document.getElementById("secondChartFemaleCount").textContent = "0";
    document.getElementById("secondChartReturningRate").textContent = "0";
    document.getElementById("secondChartAvgVisitsPerId").textContent = "0";

    alert("ÎŒÎ»Î± Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï„Î¿Ï… Î­Ï„Î¿Ï…Ï‚ Î­Ï‡Î¿Ï…Î½ ÎºÎ±Î¸Î±ÏÎ¹ÏƒÏ„ÎµÎ¯!");
  }
});
const letters = document.querySelectorAll("#neonText span");

setInterval(() => {
  const randomIndex = Math.floor(Math.random() * letters.length);
  const letter = letters[randomIndex];

  // Î•Î½Î±Î»Î»Î±Î³Î® flicker effect Î³Î¹Î± "Ï‡Î±Î»Î±ÏƒÎ¼Î­Î½Î¿" Î³ÏÎ¬Î¼Î¼Î±
  letter.classList.add("flicker-off");
  setTimeout(() => {
    letter.classList.remove("flicker-off");
  }, 800 + Math.random() * 1200);
}, 300);
function animateCircleOverlay(circleSelector, percent, parent) {
  const overlay = document.querySelector(circleSelector);
  const fullLength = 2 * Math.PI * 45; // â‰ˆ 282.6
  const targetOffset = fullLength * (1 - percent / 100);

  if (overlay) {
    // Î ÏÏÏ„Î± reset Ï„Î¿ offset Î³Î¹Î± Î½Î± ÎºÎ¬Î½ÎµÎ¹ restart Ï„Î¿ animation
    overlay.style.transition = "none";
    overlay.setAttribute("stroke-dasharray", fullLength);
    overlay.setAttribute("stroke-dashoffset", fullLength);

    // ÎœÎµÏ„Î¬ Î±Ï€ÏŒ Î¼Î¹ÎºÏÎ® ÎºÎ±Î¸Ï…ÏƒÏ„Î­ÏÎ·ÏƒÎ·, ÎµÏ†Î±ÏÎ¼ÏŒÎ¶Î¿Ï…Î¼Îµ animation
    setTimeout(() => {
      overlay.style.transition = "stroke-dashoffset 1.2s ease-in-out";
      overlay.setAttribute("stroke-dashoffset", targetOffset);
    }, 50);
  }

  // Animation Î³Î¹Î± Ï„Î¿ Ï€Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… (Ï„Î¿ Î­Ï‡ÎµÎ¹Ï‚ Î®Î´Î· ÏƒÏ‰ÏƒÏ„Î¬)
  const textContainer = document.querySelector(`${parent} .circle-percentage`);
  let i = 0;
  const interval = Math.abs(1200 / (percent || 1));
  const timer = setInterval(() => {
    i++;
    textContainer.textContent = i + "%";
    if (i >= percent) clearInterval(timer);
  }, interval);
}

let currentMalePercentage = 0;
let currentFemalePercentage = 0;

function updateGenderPieCharts(maleCount, femaleCount) {
  const total = maleCount + femaleCount;
  currentMalePercentage = total > 0 ? Math.round((maleCount / total) * 100) : 0;
  currentFemalePercentage = total > 0 ? 100 - currentMalePercentage : 0;

  // Î”ÎµÎ½ ÎºÎ¬Î½Î¿Ï…Î¼Îµ ÎµÎ´Ï animation!
}

document.querySelector('[data-view="daily"]').addEventListener("click", () => {
  // ÎšÎ»ÎµÎ¯Î½Î¿Ï…Î¼Îµ Ï„Î¿ dropdown Î¬Î¼ÎµÏƒÎ±
  dropDown.classList.remove("show");

  // ÎšÏÏÎ²Î¿Ï…Î¼Îµ Ï„Î¹Ï‚ Î¬Î»Î»ÎµÏ‚ Ï€ÏÎ¿Î²Î¿Î»Î­Ï‚
  hideAllViews();
  document.getElementById("dailyStatsPage").style.display = "flex";

const labels = [
  "09:00", "10:00", "11:00", "12:00", "13:00", "14:00",
  "15:00", "16:00", "17:00", "18:00", "19:00", "20:00",
  "21:00", "22:00", "23:00"
];

const counts = new Array(labels.length).fill(0);
scheduleMidnightReset();

if (logToday.entries && logToday.entries.length > 0) {
  logToday.entries.forEach(entry => {
    let hour = NaN;

    // âœ… Î‘Î½ ÎµÎ¯Î½Î±Î¹ HH:MM Î¼Î¿ÏÏ†Î®
    if (typeof entry.time === "string" && entry.time.includes(":")) {
      const parts = entry.time.split(":");
      hour = parseInt(parts[0]);
    }

    // âœ… Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ slot
    const index = hour - 9;
    if (!isNaN(hour) && index >= 0 && index < counts.length) {
      counts[index]++;
    }
  });
}

const ctx = document.getElementById("dailyChart").getContext("2d");

if (window.dailyChartInstance) {
  window.dailyChartInstance.data.datasets[0].data = counts;
  window.dailyChartInstance.update();
} else {
  window.dailyChartInstance = new Chart(ctx, {
    type: "bar",
    data: {
      labels: labels,
      datasets: [{
        label: "Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ ÎšÎ±Ï„Î±Î³ÏÎ±Ï†ÏÎ½",
        data: counts,
        backgroundColor: "rgba(0, 200, 255, 0.7)",
        borderRadius: 6
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          min: 0,
          max: 30,
          ticks: { stepSize: 3 },
          title: { display: true, text: "ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚" }
        },
        x: {
          title: { display: true, text: "ÎÏÎ±" }
        }
      }
    }
  });
}

// â• Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Ï€Î¹Î¿ Ï€Î¿Î»Ï…ÏƒÏÏ‡Î½Î±ÏƒÏ„Î·Ï‚ ÏÏÎ±Ï‚
const maxCount = Math.max(...counts);
const peakIndex = counts.indexOf(maxCount);
let peakHour = "-";

if (typeof labels !== 'undefined' && typeof peakIndex !== 'undefined' && Array.isArray(labels) && labels.length > peakIndex) {
  peakHour = labels[peakIndex] || "-";
}

const peakEl = document.getElementById("peakHourValue");
  if (peakEl) {
    peakEl.textContent = peakHour;
  }

  // ğŸ‘‰ Î’Î‘Î›Î¤ÎŸ Î•Î”Î© ÎœÎ•Î£Î‘!
  if (logToday.entries && logToday.entries.length > 0) {
    let maleCount = 0;
    let femaleCount = 0;

    logToday.entries.forEach(entry => {
      if (entry.gender === "MALE" || entry.gender === "Î†Î½Î´ÏÎ±Ï‚") maleCount++;
      else if (entry.gender === "FEMALE" || entry.gender === "Î“Ï…Î½Î±Î¯ÎºÎ±") femaleCount++;
    });

    updateGenderPieCharts(maleCount, femaleCount);
  }
});
let peakHour = 0; // Î® ÎºÎ¬Ï€Î¿Î¹Î± Î»Î¿Î³Î¹ÎºÎ® default Ï„Î¹Î¼Î®

// Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï„Î¿Ï… Ï€Î»Î±Î¹ÏƒÎ¯Î¿Ï…
document.getElementById("peakHourValue").textContent = peakHour;

// âœ… ÎÎ•ÎŸÎ£ ÏƒÏ‰ÏƒÏ„ÏŒÏ‚ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î¼ÏŒÎ½Î¿ Î³Î¹Î± Ï„Î· ÏƒÎ·Î¼ÎµÏÎ¹Î½Î® Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±
const today = new Date().toISOString().slice(0, 10); // ÎœÎ¿ÏÏ†Î® "YYYY-MM-DD"
const todaysEntries = logToday.entries.filter(entry => {
  const dateObj = new Date(entry.time);
  if (isNaN(dateObj)) {
    console.warn("â›”ï¸ Î†ÎºÏ…ÏÎ· Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± entry.time:", entry.time);
    return false; // Î±Î³Î½ÏŒÎ·ÏƒÎ­ Ï„Î¿
  }

  const entryDate = dateObj.toISOString().slice(0, 10);
  return entryDate === today;
});

// ğŸ” Firebase config (ÏŒÏ€Ï‰Ï‚ Ï„Î¿ ÎµÎ¯Ï‡ÎµÏ‚)
const firebaseConfig = {
  apiKey: "AIzaSyBcwXllrv82qw6o7FCwgJL2_qNGheLNit0",
  authDomain: "xgym-b5623.firebaseapp.com",
  databaseURL: "https://xgym-b5623-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "xgym-b5623",
  storageBucket: "xgym-b5623.appspot.com",
  messagingSenderId: "269441169531",
  appId: "1:269441169531:web:ff6633493eb25a73f4cade",
  measurementId: "G-G7ZT57CELS"
};

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  // Get a reference to the database
  const db = firebase.database();

  function scheduleMidnightReset() {
  const now = new Date();
  const midnight = new Date();
  midnight.setHours(24, 0, 0, 0); // Î‘Ï€ÏŒÏˆÎµ ÏƒÏ„Î¹Ï‚ 00:00

  const msUntilMidnight = midnight.getTime() - now.getTime();

  setTimeout(() => {
    // ÎœÎ·Î´ÎµÎ½Î¯Î¶Î¿Ï…Î¼Îµ Ï„Î¹Ï‚ ÎµÎ³Î³ÏÎ±Ï†Î­Ï‚
    logToday.entries = [];

    // Î‘Î´ÎµÎ¹Î¬Î¶Î¿Ï…Î¼Îµ ÎºÎ±Î¹ Ï„Î± counts Î³Î¹Î± Ï„Î¿ Î´Î¹Î¬Î³ÏÎ±Î¼Î¼Î±
    for (let i = 0; i < counts.length; i++) {
      counts[i] = 0;
    }

    // Î•Î½Î·Î¼ÎµÏÏÎ½Î¿Ï…Î¼Îµ chart Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹
    if (window.dailyChartInstance) {
      window.dailyChartInstance.data.datasets[0].data = counts;
      window.dailyChartInstance.update();
    }

    // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¿Ï Ï€Î¯Î½Î±ÎºÎ±
    updateTotalEntriesBox();
    updateGenderPieCharts(0, 0);

    // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· localStorage
    saveLogData();

    // Î ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼ÏŒÏ‚ Î³Î¹Î± Ï„Î·Î½ ÎµÏ€ÏŒÎ¼ÎµÎ½Î· Î¼Î­ÏÎ±
    scheduleMidnightReset();
  }, msUntilMidnight);
}
function updateTotalEntriesBox() {
  document.getElementById("totalEntriesValue").textContent = logToday.entries.length;
}
function updateGenderPercentages() {
  const entries = logToday.entries;
  const total = entries.length;

  let maleCount = 0;
  let femaleCount = 0;

  for (const entry of entries) {
    if (entry.gender === "MALE") maleCount++;
    else if (entry.gender === "FEMALE") femaleCount++;
  }

  const malePercent = total === 0 ? 0 : Math.round((maleCount / total) * 100);
  const femalePercent = total === 0 ? 0 : 100 - malePercent;

  // ğŸ”„ Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÎºÎµÎ¹Î¼Î­Î½Î¿Ï…
  document.querySelector("#circle-1 .circle-percentage").textContent = `${malePercent}%`;
  document.querySelector("#circle-2 .circle-percentage").textContent = `${femalePercent}%`;

  // ğŸ”„ Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· stroke-dashoffset
  const fullLength = 2 * Math.PI * 45; // = 282.6 Ï€ÎµÏÎ¯Ï€Î¿Ï…
  const maleOffset = fullLength * (1 - malePercent / 100);
  const femaleOffset = fullLength * (1 - femalePercent / 100);

  document.querySelector("#circle-1 .circle-overlay").setAttribute("stroke-dashoffset", maleOffset);
document.querySelector("#circle-2 .circle-overlay").setAttribute("stroke-dashoffset", femaleOffset);
}
function showPage(pageId) {
  const allPages = ["mainContent", "weeksView", "todayView", "dailyStatsPage", "dayLogView", "monthlyStatsPage"];
  allPages.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.display = (id === pageId) ? "block" : "none";
  });

  // Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ scroll ÏƒÏ„Î·Î½ Î±ÏÏ‡Î® ÎºÎ¬Î¸Îµ ÏƒÎµÎ»Î¯Î´Î±Ï‚
  window.scrollTo(0, 0);

  // âœ… Î‘Î½ Ï€Î±Ï„Î®Î¸Î·ÎºÎµ Î· Î·Î¼ÎµÏÎ®ÏƒÎ¹Î± ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ®, Ï„ÏŒÏ„Îµ Ï†ÏŒÏÏ„Ï‰ÏƒÎµ Ï„Î± Î·Î¼ÎµÏÎ®ÏƒÎ¹Î± Î­ÏƒÎ¿Î´Î±
  if (pageId === "dailyStatsPage") {
  console.log("âœ… dailyStatsPage ÎµÎ¼Ï†Î±Î½Î¯ÏƒÏ„Î·ÎºÎµ");

  // Î ÎµÏÎ¯Î¼ÎµÎ½Îµ Î»Î¯Î³Î¿ Î½Î± ÎµÎ¼Ï†Î±Î½Î¹ÏƒÏ„ÎµÎ¯ Ï„Î¿ DOM Ï„Î¿Ï… Ï€Î¯Î½Î±ÎºÎ±
  const checkAndLoad = () => {
    const tbody = document.getElementById("incomeTableBody");
    if (tbody) {
      console.log("âœ… Î Î¯Î½Î±ÎºÎ±Ï‚ Î²ÏÎ­Î¸Î·ÎºÎµ - Ï†Î¿ÏÏ„ÏÎ½Î¿Ï…Î¼Îµ Ï„Î± Î­ÏƒÎ¿Î´Î±");
      loadDailyIncome();
    } else {
      console.log("â³ Î ÎµÏÎ¹Î¼Î­Î½Î¿Ï…Î¼Îµ Î½Î± ÎµÎ¼Ï†Î±Î½Î¹ÏƒÏ„ÎµÎ¯ Î¿ Ï€Î¯Î½Î±ÎºÎ±Ï‚...");
      setTimeout(checkAndLoad, 200);
    }
  };

  checkAndLoad();
}
}

document.addEventListener("DOMContentLoaded", () => {
  // ğŸ”˜ ÎšÎ¿Ï…Î¼Ï€Î¯ "Î‘ÏÏ‡Î¹ÎºÎ®"
  const homeBtn = document.getElementById("homeButton");
  if (homeBtn) homeBtn.addEventListener("click", () => showPage("mainContent"));

  // ğŸ”˜ ÎšÎ¿Ï…Î¼Ï€Î¯ "Î£Î®Î¼ÎµÏÎ±"
  const todayBtn = document.getElementById("todayBtn");
  if (todayBtn) todayBtn.addEventListener("click", () => showPage("todayView"));

  // ğŸ”˜ Î—Î¼ÎµÏÎ®ÏƒÎ¹Î± ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬
  const statsDailyBtn = document.querySelector('button[data-view="daily"]');
  if (statsDailyBtn) {
    statsDailyBtn.addEventListener("click", () => {
      showPage("dailyStatsPage");
      loadDailyIncome();
    });
  }

  // ğŸ”˜ ÎœÎ®Î½ÎµÏ‚ => ÎµÎ²Î´Î¿Î¼Î¬Î´ÎµÏ‚
  //const monthsToggle = document.getElementById("monthsToggle");
  //if (monthsToggle) monthsToggle.addEventListener("click", () => showPage("weeksView"));

  // Î‘Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Ï€Î¯Î½Î±ÎºÎ±Ï‚, Ï†ÏŒÏÏ„Ï‰ÏƒÎ­ Ï„Î¿Î½
  const tbody = document.getElementById("incomeTableBody");
  if (tbody) {
    console.log("ğŸ“‹ ÎŸ Ï€Î¯Î½Î±ÎºÎ±Ï‚ incomeTableBody Ï…Ï€Î¬ÏÏ‡ÎµÎ¹, ÎºÎ±Î»Ï loadDailyIncome()");
    loadDailyIncome();
  }
});
function drawCircle(container, id, progress, parent, strokeColor) {
  const svg = document.querySelector(`${container} svg`);
  const overlay = svg.querySelector('circle.overlay');

  // ÎœÎ®ÎºÎ¿Ï‚ Ï€ÎµÏÎ¹Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚ ÎºÏÎºÎ»Î¿Ï… (circumference = 2Ï€r = 2Ï€Â·45 â‰ˆ 282.6)
  const circumference = 2 * Math.PI * 45;
  const offset = circumference - (progress / 100) * circumference;

  overlay.setAttribute("stroke-dasharray", circumference);
  overlay.setAttribute("stroke-dashoffset", circumference);

  if (strokeColor) overlay.setAttribute("stroke", strokeColor);

  // Animate Ï„Î¿ offset
  overlay.animate([
    { strokeDashoffset: circumference },
    { strokeDashoffset: offset }
  ], {
    duration: 100000,
    easing: "ease-in-out",
    fill: "forwards"
  });

  // Î‘Î½Î±Î½ÎµÏÎ½ÎµÎ¹ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ %
  const textContainer = $(parent).find('.circle-percentage');
  let i = 0;
  let totalAnimationTime = 8000; // Ï€.Ï‡. 3 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
  let intervalTime = Math.abs(totalAnimationTime / progress);
  let timerID = setInterval(() => {
    i++;
    textContainer.text(i + "%");
    if (i >= progress) clearInterval(timerID);
  }, intervalTime);
}
$(document).ready(function () {
    $('.daily-income-table .toggle-3d').on('click', function () {
      $('.daily-income-table table').toggleClass('threeDMode');
    });
  });
async function loadDailyIncome() {
  const clearYearFlag = false; // Î˜Î­ÏƒÎµ true ÎœÎŸÎÎŸ ÏŒÏ„Î±Î½ Î¸Î­Î»ÎµÎ¹Ï‚ Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÎ¹Ï‚ Ï„Î± Ï€Î¬Î½Ï„Î±

  if (clearYearFlag) {
    console.warn("ğŸ§¨ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î­Ï„Î¿Ï…Ï‚ ÏƒÎµ ÎµÎ¾Î­Î»Î¹Î¾Î·...");
    localStorage.removeItem("attendanceData");
    localStorage.setItem("lastClearDate", new Date().toISOString()); // â• Î£Î·Î¼ÎµÎ¹ÏÎ½Î¿Ï…Î¼Îµ Ï„Î·Î½ Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± ÎºÎ±Î¸Î±ÏÎ¹ÏƒÎ¼Î¿Ï
    mockData = {};

    const tbody = document.getElementById("incomeTableBody");
    if (tbody) tbody.innerHTML = "";

    const label = document.querySelector(".toggle-3d");
    if (label) label.textContent = `Î—Î¼ÎµÏÎ®ÏƒÎ¹Î± Î­ÏƒÎ¿Î´Î±: 0 â‚¬`;

    document.getElementById("totalJulyIncome").textContent = "0â‚¬";
    document.getElementById("secondChartTotalEntries").textContent = "0";
    document.getElementById("secondChartUniqueIds").textContent = "0";
    document.getElementById("secondChartMonthlyAverage").textContent = "0";
    document.getElementById("totalAnnualClients").textContent = "0";
    document.getElementById("secondChartBestMonth").textContent = "0";
    document.getElementById("secondChartMaleCount").textContent = "0";
    document.getElementById("secondChartFemaleCount").textContent = "0";
    document.getElementById("secondChartReturningRate").textContent = "0";
    document.getElementById("secondChartAvgVisitsPerId").textContent = "0";
    

    return;
  }

  try {
    const response = await fetch("https://script.google.com/macros/s/AKfycbx9W56zUkBxMUWtl6cKfpmzgKbICWVqUXkyA9c2-rjLbeoTLvwcxgJZZezk8mNSMgvygw/exec");

    if (!response.ok) {
      console.error("âŒ Î£Ï†Î¬Î»Î¼Î± fetch:", response.status, response.statusText);
      return;
    }

    const data = await response.json();
    console.log("âœ… Î”ÎµÎ´Î¿Î¼Î­Î½Î± Î±Ï€ÏŒ API:", data);

    if (!Array.isArray(data) || data.length === 0) {
      console.warn("âš ï¸ Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î³Î¹Î± ÏƒÎ®Î¼ÎµÏÎ±.");
    }

    const lastClearStr = localStorage.getItem("lastClearDate");
    const lastClearDate = lastClearStr ? new Date(lastClearStr) : null;

    const tbody = document.getElementById("incomeTableBody");
    if (!tbody) {
      console.warn("âš ï¸ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï„Î¿ tbody Î¼Îµ id incomeTableBody");
      return;
    }

    tbody.innerHTML = "";

    let total = 0;
    const today = new Date();
    const todayStr = today.toLocaleDateString("el-GR");

    if (!mockData[todayStr]) {
      mockData[todayStr] = [];
    }

    data.forEach(entry => {
      const name = entry.name || "";
      const amount = parseFloat(entry.amount) || 0;
      const dateStr = entry.date || entry["Î—Îœ/ÎÎ™Î‘ Î Î›Î—Î¡Î©ÎœÎ—Î£"] || "";
      const entryDate = new Date(dateStr);

      // âœ… Î‘Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ lastClearDate, Î±Î³Î½ÏŒÎ·ÏƒÎµ ÏŒ,Ï„Î¹ ÎµÎ¯Î½Î±Î¹ Î Î¡Î™Î Î±Ï€ÏŒ Î±Ï…Ï„Î®Î½
      if (lastClearDate && entryDate < lastClearDate) {
        console.log("â© Î‘Î³Î½Î¿Î®Î¸Î·ÎºÎµ Ï€Î±Î»Î¹ÏŒ entry:", name, dateStr);
        return;
      }

      const row = document.createElement("tr");
      row.setAttribute("data-date", dateStr);

      const nameCell = document.createElement("td");
      nameCell.textContent = name;

      const amountCell = document.createElement("td");
      amountCell.textContent = amount;

      row.appendChild(nameCell);
      row.appendChild(amountCell);
      tbody.appendChild(row);

      total += amount;

      const alreadyExists = mockData[todayStr].some(e =>
        e.name === name && e.amount === amount && e.type === "income"
      );

      if (!alreadyExists) {
        mockData[todayStr].push({
          id: "INCOME",
          name: name,
          amount: amount,
          time: today.toLocaleTimeString("el-GR"),
          type: "income"
        });
      }
    });

    if (typeof saveMockData === "function") {
      saveMockData();
    }

    const label = document.querySelector(".toggle-3d");
    if (label) {
      label.textContent = `Î—Î¼ÎµÏÎ®ÏƒÎ¹Î± Î­ÏƒÎ¿Î´Î±: ${total} â‚¬`;
      console.log("ğŸ’¶ Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Î­ÏƒÎ¿Î´Î±:", total);
    }

    const activeMonthBtn = document.querySelector('#monthSelector button.active');
    if (activeMonthBtn) {
      const selectedMonth = parseInt(activeMonthBtn.getAttribute("data-month"));
      if (!isNaN(selectedMonth)) {
        updateMonthlyChartFromData(selectedMonth);
      }
    }

  } catch (error) {
    console.error("âŒ Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î¿ fetch:", error);
  }
  const activeMonthBtn = document.querySelector('#monthSelector button.active');
const monthToRedraw = activeMonthBtn ? parseInt(activeMonthBtn.dataset.month, 10)
                                    : (new Date().getMonth() + 1);
drawSecondChart(monthToRedraw);
}

function waitForTableAndRender(data) {
  const tbody = document.getElementById("incomeTableBody");
  if (!tbody) {
    console.log("â³ Î ÎµÏÎ¹Î¼Î­Î½Ï‰ tbody Î³Î¹Î± Ï€Î¯Î½Î±ÎºÎ±...");
    return setTimeout(() => waitForTableAndRender(data), 200);
  }

  tbody.innerHTML = "";
  data.forEach(entry => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${entry.name || "-"}</td>
      <td>â‚¬${parseFloat(entry.amount) || 0}</td>
    `;
    tbody.appendChild(row);
  });
}
console.log("âš™ï¸ Î— ÏƒÎµÎ»Î¯Î´Î± Ï†Î¿ÏÏ„ÏÎ¸Î·ÎºÎµ");

  window.addEventListener("DOMContentLoaded", () => {
    console.log("âœ… DOM Ï†Î¿ÏÏ„ÏÎ¸Î·ÎºÎµ");
    if (typeof loadDailyIncome === "function") {
      console.log("ğŸ“ ÎšÎ»Î®ÏƒÎ· Ï„Î·Ï‚ loadDailyIncome...");
      loadDailyIncome();
    } else {
      console.warn("âŒ Î— ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· loadDailyIncome Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î·");
    }
  });
  // âœ… Î•Ï€Î¹Ï„Î®ÏÎ·ÏƒÎ· scroll Î³Î¹Î± ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Ï‰Î½ Ï€Î¯Ï„Ï‰Î½
let hasAnimated = false;

const observer = new IntersectionObserver((entries, observer) => {
  entries.forEach(entry => {
    if (entry.isIntersecting && !hasAnimated) {
      animateCircleOverlay('#chart-3 .circle-overlay', currentMalePercentage, '#circle-1');
      animateCircleOverlay('#chart-4 .circle-overlay', currentFemalePercentage, '#circle-2');
      hasAnimated = true;
      observer.disconnect(); // Î”ÎµÎ½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î¾Î±Î½Î¬
    }
  });
}, {
  threshold: 0.000001
});

// Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Ï„Ï‰Î½ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Ï‰Î½ Ï€Î¯Ï„Î±Ï‚
observer.observe(document.getElementById('circle-1'));
observer.observe(document.getElementById('circle-2'));

function getMonthName(monthNumber) {
  const names = ["Î™Î±Î½Î¿Ï…Î±ÏÎ¯Î¿Ï…", "Î¦ÎµÎ²ÏÎ¿Ï…Î±ÏÎ¯Î¿Ï…", "ÎœÎ±ÏÏ„Î¯Î¿Ï…", "Î‘Ï€ÏÎ¹Î»Î¯Î¿Ï…", "ÎœÎ±ÎÎ¿Ï…", "Î™Î¿Ï…Î½Î¯Î¿Ï…", "Î™Î¿Ï…Î»Î¯Î¿Ï…", "Î‘Ï…Î³Î¿ÏÏƒÏ„Î¿Ï…", "Î£ÎµÏ€Ï„ÎµÎ¼Î²ÏÎ¯Î¿Ï…", "ÎŸÎºÏ„Ï‰Î²ÏÎ¯Î¿Ï…", "ÎÎ¿ÎµÎ¼Î²ÏÎ¯Î¿Ï…", "Î”ÎµÎºÎµÎ¼Î²ÏÎ¯Î¿Ï…"];
  return names[parseInt(monthNumber) - 1] || "";
}

document.addEventListener("DOMContentLoaded", () => {
  const statsMonthlyBtn = document.querySelector('[data-view="monthly"]');
  const monthlyStatsPage = document.getElementById("monthlyStatsPage");
  const julyChartContainer = document.getElementById("julyChartContainer");
  const secondChartContainer = document.getElementById("secondChartContainer");
  const monthButtons = document.querySelectorAll('#monthSelector button');
  const exportBtn = document.getElementById("exportCsvBtn");
 if (exportBtn) {
  exportBtn.addEventListener("click", () => {
    if (!mockData || Object.keys(mockData).length === 0) {
      alert("Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚ Î³Î¹Î± ÎµÎ¾Î±Î³Ï‰Î³Î®.");
      return;
    }

    let csvContent = "";
    let yearlyIncome = 0;

    for (let month = 1; month <= 12; month++) {
      const monthData = Object.entries(mockData).filter(([dateStr]) => {
        const [d, m, y] = dateStr.split("/").map(Number);
        return m === month && y === 2025;
      });

      if (monthData.length === 0) continue;

      let totalEntries = 0;
      let uniqueIds = new Set();
      let genderCounts = { male: 0, female: 0 };
      let idOccurrences = new Map();
      let totalIncome = 0;
      let weeklyIncome = [0, 0, 0, 0, 0];

      monthData.forEach(([dateStr, entries]) => {
        const day = parseInt(dateStr.split("/")[0], 10);
        const weekIndex = Math.floor((day - 1) / 7);

        const scans = entries.filter(e => e.type !== "income");
        const incomes = entries.filter(e => e.type === "income");

        totalEntries += scans.length;
        scans.forEach(e => {
          if (e.id) uniqueIds.add(e.id);
          const gender = (e.gender || "").toLowerCase();
          if (gender === "Î¬Î½Î´ÏÎ±Ï‚" || gender === "male") genderCounts.male++;
          if (gender === "Î³Ï…Î½Î±Î¯ÎºÎ±" || gender === "female") genderCounts.female++;
          if (e.id) idOccurrences.set(e.id, (idOccurrences.get(e.id) || 0) + 1);
        });

        incomes.forEach(e => {
          const amt = parseFloat(e.amount) || 0;
          totalIncome += amt;
          weeklyIncome[weekIndex] += amt;
        });
      });

      const idCount = uniqueIds.size;
      const avgCombined = idCount ? Math.round((totalEntries + idCount) / 2) : 0;
      const avgPerId = idCount ? Math.round(totalEntries / idCount) : 0;
      const returning = Array.from(idOccurrences.values()).filter(c => c > 10).length;
      const returningRate = idCount ? Math.round((returning / idCount) * 100) : 0;
      const bestWeekIndex = weeklyIncome.findIndex(v => v === Math.max(...weeklyIncome));
      const bestWeekValue = weeklyIncome[bestWeekIndex].toFixed(2);
      const monthName = new Date(2025, month - 1).toLocaleString("el-GR", { month: "long" });

      yearlyIncome += totalIncome;

      // ğŸ”½ Î‘Î½Î±Î»Ï…Ï„Î¹ÎºÎ® Î¼Î¿ÏÏ†Î® Î±Î½Î¬ Î¼Î®Î½Î±
      csvContent += `ğŸ—“ï¸ ÎœÎ®Î½Î±Ï‚: ${monthName}\n`;
      csvContent += `ğŸ“Œ Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚: ${totalEntries}\n`;
      csvContent += `ğŸ‘¥ Î£ÏÎ½Î¿Î»Î¿ ÎœÎ¿Î½Î±Î´Î¹ÎºÏÎ½ ID: ${idCount}\n`;
      csvContent += `ğŸ‘¨ Î†Î½Î´ÏÎµÏ‚: ${genderCounts.male}\n`;
      csvContent += `ğŸ‘© Î“Ï…Î½Î±Î¯ÎºÎµÏ‚: ${genderCounts.female}\n`;
      csvContent += `ğŸ“Š ÎœÎ­ÏƒÎ¿Ï‚ ÎŒÏÎ¿Ï‚ (ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚ + IDs)/2: ${avgCombined}\n`;
      csvContent += `ğŸ“ˆ Îœ.ÎŸ. ÎµÏ€Î¹ÏƒÎºÎ­ÏˆÎµÏ‰Î½ Î±Î½Î¬ ID: ${avgPerId}\n`;
      csvContent += `ğŸ” Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ Ï€ÎµÎ»Î±Ï„ÏÎ½ Î¼Îµ >10 ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚: ${returningRate}%\n`;
      csvContent += `ğŸ’¶ Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ ÎˆÏƒÎ¿Î´Î±: ${totalIncome.toFixed(2)} â‚¬\n`;
      csvContent += `ğŸ† ÎšÎ±Î»ÏÏ„ÎµÏÎ· Î•Î²Î´Î¿Î¼Î¬Î´Î±: Î•Î²Î´Î¿Î¼Î¬Î´Î± ${bestWeekIndex + 1} Î¼Îµ ${bestWeekValue} â‚¬\n`;
      csvContent += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
    }

    // â• Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î•Ï„Î®ÏƒÎ¹Ï‰Î½ Î ÎµÎ»Î±Ï„ÏÎ½
    let allYearIds = new Set();
    for (const dateStr in mockData) {
      const [d, m, y] = dateStr.split("/").map(Number);
      if (y === 2025) {
        mockData[dateStr].forEach(e => {
          if (e.type !== "income" && e.id) {
            allYearIds.add(e.id);
          }
        });
      }
    }
    const yearlyUniqueCustomers = allYearIds.size;

    // âœ… Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î•Ï„Î®ÏƒÎ¹Î¿Ï… Î£Ï…Î½ÏŒÎ»Î¿Ï… ÏƒÏ„Î¿ Ï„Î­Î»Î¿Ï‚
    csvContent += `\nğŸ“… Î•Ï„Î®ÏƒÎ¹Î± Î£ÏÎ½Î¿ÏˆÎ·\n`;
    csvContent += `ğŸ’¶ Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Î•Ï„Î®ÏƒÎ¹Î± ÎˆÏƒÎ¿Î´Î±: ${yearlyIncome.toFixed(2)} â‚¬\n`;
    csvContent += `ğŸ‘¥ Î•Ï„Î®ÏƒÎ¹Î¿Î¹ Î ÎµÎ»Î¬Ï„ÎµÏ‚: ${yearlyUniqueCustomers}\n`;

    // ğŸ“¥ Î•Î¾Î±Î³Ï‰Î³Î® Ï‰Ï‚ CSV Î±ÏÏ‡ÎµÎ¯Î¿
    const blob = new Blob(["\uFEFF" + csvContent], { type: "text/csv;charset=utf-8;" });
    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.setAttribute("href", url);
    link.setAttribute("download", "ÎœÎ·Î½Î¹Î±Î¯Î±_Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬_Î‘Î½Î¬_ÎœÎ®Î½Î±.csv");
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  });
}
  // âœ… Î¦ÏŒÏÏ„Ï‰ÏƒÎµ Ï„Î¿ Î´ÎµÏÏ„ÎµÏÎ¿ Î³ÏÎ¬Ï†Î·Î¼Î± ÎœÎŸÎÎŸ Î¼Î¯Î± Ï†Î¿ÏÎ¬
  let secondChartDrawn = false;

  statsMonthlyBtn?.addEventListener("click", () => {
  hideAllViews();
  monthlyStatsPage.style.display = "flex";
});

// âœ… Trigger Ï„ÏÎ­Ï‡Î¿Î½Ï„Î¿Ï‚ Î¼Î®Î½Î± ÎœÎŸÎ›Î™Î£ Ï†Î¿ÏÏ„Ï‰Î¸ÎµÎ¯ ÏŒÎ»Î¿
setTimeout(() => {
  const currentMonth = new Date().getMonth() + 1;
  const defaultMonthBtn = document.querySelector(`button[data-month="${currentMonth}"]`);
  if (defaultMonthBtn) {
  defaultMonthBtn.classList.remove("active");
  defaultMonthBtn.click();
}
}, 100); // ÎœÎ¹ÎºÏÎ® ÎºÎ±Î¸Ï…ÏƒÏ„Î­ÏÎ·ÏƒÎ· Î³Î¹Î± Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±

  // 2. ÎŒÏ„Î±Î½ Ï€Î±Ï„Î¹Î­Ï„Î±Î¹ ÎºÎ¬Ï€Î¿Î¹Î¿Ï‚ Î¼Î®Î½Î±Ï‚
  monthButtons.forEach(button => {
  button.addEventListener("click", () => {
    const selectedMonth = button.getAttribute("data-month");

    // Î£Ï„Ï…Î» active
    monthButtons.forEach(btn => btn.classList.remove("active"));
    button.classList.add("active");

    // âœ… Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Ï‰Î½ Î³ÏÎ±Ï†Î·Î¼Î¬Ï„Ï‰Î½
    julyChartContainer.style.display = "block";
    secondChartContainer.style.display = "block";

    // âœ… Î£Ï‡ÎµÎ´Î¯Î±ÏƒÎ· Î³ÏÎ±Ï†Î·Î¼Î¬Ï„Ï‰Î½ Î¼Îµ Î²Î¬ÏƒÎ· Ï„Î¿Î½ Î¼Î®Î½Î±
    drawMonthlyChart(selectedMonth);
    drawSecondChart(selectedMonth);
  });
});
});

// 3. Î£Ï…Î½Î¬ÏÏ„Î·ÏƒÎ· Î³Î¹Î± Î½Î± ÎºÏÏÎ²Î¿Î½Ï„Î±Î¹ ÏŒÎ»ÎµÏ‚ Î¿Î¹ Ï€ÏÎ¿Î²Î¿Î»Î­Ï‚
function hideAllViews() {
  document.querySelectorAll(".content, .statistics-page").forEach(el => {
    el.style.display = "none";
  });
}

// 4. Î£Ï…Î½Î¬ÏÏ„Î·ÏƒÎ· ÏƒÏ‡ÎµÎ´Î¯Î±ÏƒÎ·Ï‚ Î³ÏÎ±Ï†Î®Î¼Î±Ï„Î¿Ï‚ Î™Î¿Ï…Î»Î¯Î¿Ï…
function drawMonthlyChart(month) {
  const ctx = document.getElementById("julyChart").getContext("2d");

  if (window.julyChartInstance) {
    window.julyChartInstance.destroy();
  }

  window.julyChartInstance = new Chart(ctx, {
    type: "line",
    data: {
      labels: ["1Î· Î•Î²Î´Î¿Î¼Î¬Î´Î±", "2Î· Î•Î²Î´Î¿Î¼Î¬Î´Î±", "3Î· Î•Î²Î´Î¿Î¼Î¬Î´Î±", "4Î· Î•Î²Î´Î¿Î¼Î¬Î´Î±"],
      datasets: [{
        label: `Î•Î²Î´Î¿Î¼Î±Î´Î¹Î±Î¯Î± Î­ÏƒÎ¿Î´Î± ${getMonthName(month)}`,
        data: [0, 0, 0, 0],
        borderColor: "rgba(0, 200, 255, 0.9)",
        backgroundColor: "rgba(0, 200, 255, 0.2)",
        borderWidth: 3,
        pointBackgroundColor: "white",
        pointBorderColor: "#fff",
        pointRadius: 5,
        pointHoverRadius: 10,
        pointHoverBorderColor: "#ff4081",
        pointHoverBackgroundColor: "#fff",
        pointHoverBorderWidth: 3,
        tension: 0.3,
        fill: true
      }]
    },
    options: {
      responsive: true,
      plugins: {
        tooltip: {
  enabled: true,
  mode: 'nearest',
  backgroundColor: "#333",
  titleColor: "#fff",
  bodyColor: "#fff",
  padding: 12,
  displayColors: false, // âœ… Î±Ï…Ï„ÏŒ Î±Ï†Î±Î¹ÏÎµÎ¯ Ï„Î¿ ÎºÎ¿Ï…Ï„Î¬ÎºÎ¹
  callbacks: {
    label: context => `ÎˆÏƒÎ¿Î´Î±: â‚¬${context.parsed.y}`
  }
},
        title: {
          display: true,
          text: "ÎˆÏƒÎ¿Î´Î± Î™Î¿Ï…Î»Î¯Î¿Ï…:",
          color: "white",
          font: {
            size: 22,
            weight: "bold"
          }
        },
        legend: {
          labels: {
            color: "white",
            font: {
              size: 16
            }
          }
        },
        zoom: {
          pan: {
            enabled: true,
            mode: 'x',
            modifierKey: 'ctrl'
          },
          zoom: {
            wheel: { enabled: true },
            pinch: { enabled: true },
            mode: 'x'
          }
        }
      },
      interaction: {
        mode: 'nearest',
        axis: 'x',
        intersect: false
      },
      scales: {
  x: {
    ticks: { color: "white" },
    grid: { color: "rgba(255, 255, 255, 0.1)" }
  },
  y: {
    min: 0,
    ticks: {
      stepSize: 50,
      color: "white"
    },
    grid: {
      color: "rgba(255, 255, 255, 0.1)"
    }
  }
}
    }
  });

  // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎµ Ï„Î¿ Î³ÏÎ¬Ï†Î·Î¼Î± Î¼Îµ Ï„Î± ÏƒÎ·Î¼ÎµÏÎ¹Î½Î¬ Î´ÎµÎ´Î¿Î¼Î­Î½Î±
  updateMonthlyChartFromData(month);
}
function updateMonthlyChartFromData(monthInput) {
  const weeklyTotals = [0, 0, 0, 0];
  const selectedMonth = parseInt(monthInput);

  // â¤ Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÎµÎ²Î´Î¿Î¼Î±Î´Î¹Î±Î¯Ï‰Î½ ÎµÏƒÏŒÎ´Ï‰Î½ Î³Î¹Î± Ï„Î¿Î½ Î¼Î®Î½Î±
  for (const dateStr in mockData) {
    const [dayStr, monthStr, yearStr] = dateStr.split("/");
    const day = parseInt(dayStr);
    const m = parseInt(monthStr);
    const y = parseInt(yearStr);

    if (m === selectedMonth && y === 2025) {
      console.log("âœ… ÎœÎ­ÏÎ± Ï€Î¿Ï… Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÏ„Î±Î¹:", dateStr);
      let weekIndex = -1;
      if (day >= 1 && day <= 7) weekIndex = 0;
      else if (day >= 8 && day <= 14) weekIndex = 1;
      else if (day >= 15 && day <= 21) weekIndex = 2;
      else if (day >= 22) weekIndex = 3;

      const entries = mockData[dateStr];
      entries.forEach(entry => {
        if (entry.type === "income") {
          const amount = parseFloat(entry.amount) || 0;
          weeklyTotals[weekIndex] += amount;
        }
      });
    }
  }

  // â¤ Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î³ÏÎ±Ï†Î®Î¼Î±Ï„Î¿Ï‚
  if (window.julyChartInstance) {
    window.julyChartInstance.data.datasets[0].data = weeklyTotals;

    const total = weeklyTotals.reduce((a, b) => a + b, 0);
    const bestWeek = weeklyTotals.indexOf(Math.max(...weeklyTotals)) + 1;

    window.julyChartInstance.options.plugins.title.text = `ÎˆÏƒÎ¿Î´Î± ${getMonthName(monthInput)}: â‚¬${total}`;
    window.julyChartInstance.update();

    document.getElementById("totalJulyIncome").textContent = `${total.toFixed(2)}â‚¬`;
    document.getElementById("bestWeekLabel").textContent = `${bestWeek}Î· Î•Î²Î´Î¿Î¼Î¬Î´Î±`;
  }

  // â¤ Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î´ÎµÏ…Ï„Î­ÏÎ¿Ï… Î³ÏÎ±Ï†Î®Î¼Î±Ï„Î¿Ï‚
  updateSecondChartTotals(monthInput);

  // â¤ Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· Î¼Îµ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ Î¼Î®Î½Î±
  const prevMonth = selectedMonth - 1;
  let prevMonthTotal = 0;

  for (const dateStr in mockData) {
    const [dayStr, monthStr, yearStr] = dateStr.split("/");
    const m = parseInt(monthStr);
    const y = parseInt(yearStr);

    if (m === prevMonth && y === 2025) {
      const entries = mockData[dateStr];
      entries.forEach(entry => {
        if (entry.type === "income") {
          const amount = parseFloat(entry.amount) || 0;
          prevMonthTotal += amount;
        }
      });
    }
  }

  const comparisonDiv = document.getElementById("incomeComparison");
  if (comparisonDiv) {
    const total = weeklyTotals.reduce((a, b) => a + b, 0);
    if (prevMonthTotal > 0) {
      const diff = total - prevMonthTotal;
      const percentChange = (diff / prevMonthTotal) * 100;
      const rounded = Math.abs(percentChange).toFixed(1);
      const arrow = percentChange > 0 ? "ğŸ“ˆ" : "ğŸ“‰";
      const sign = percentChange > 0 ? "+" : "âˆ’";
      const color = percentChange > 0 ? "limegreen" : "crimson";

      comparisonDiv.textContent = `${arrow} ${sign}${rounded}% Î±Ï€ÏŒ Ï„Î¿Î½ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ Î¼Î®Î½Î±`;
      comparisonDiv.style.color = color;
    } else {
      comparisonDiv.textContent = `âš ï¸ Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î³Î¹Î± ÏƒÏÎ³ÎºÏÎ¹ÏƒÎ·`;
      comparisonDiv.style.color = "#aaa";
    }
  }

  // â¤ Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÏƒÏ…Î½Î¿Î»Î¹ÎºÏÎ½ ÎµÏƒÏŒÎ´Ï‰Î½ Î±Î½Î¬ Î¼Î®Î½Î±
  const monthTotals = new Array(12).fill(0);

  for (const dateStr in mockData) {
    const [d, mStr, yStr] = dateStr.split("/");
    const m = parseInt(mStr) - 1;
    const y = parseInt(yStr);

    if (y === 2025) {
      const entries = mockData[dateStr];
      entries.forEach(entry => {
        if (entry.type === "income") {
          const amount = parseFloat(entry.amount) || 0;
          monthTotals[m] += amount;
        }
      });
    }
  }

  const monthNames = [
    "Î™Î±Î½Î¿Ï…Î¬ÏÎ¹Î¿Ï‚", "Î¦ÎµÎ²ÏÎ¿Ï…Î¬ÏÎ¹Î¿Ï‚", "ÎœÎ¬ÏÏ„Î¹Î¿Ï‚", "Î‘Ï€ÏÎ¯Î»Î¹Î¿Ï‚",
    "ÎœÎ¬Î¹Î¿Ï‚", "Î™Î¿ÏÎ½Î¹Î¿Ï‚", "Î™Î¿ÏÎ»Î¹Î¿Ï‚", "Î‘ÏÎ³Î¿Ï…ÏƒÏ„Î¿Ï‚",
    "Î£ÎµÏ€Ï„Î­Î¼Î²ÏÎ¹Î¿Ï‚", "ÎŸÎºÏ„ÏÎ²ÏÎ¹Î¿Ï‚", "ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿Ï‚", "Î”ÎµÎºÎ­Î¼Î²ÏÎ¹Î¿Ï‚"
  ];

  // â¤ ÎšÎ±Î»ÏÏ„ÎµÏÎ¿Ï‚ Î¼Î®Î½Î±Ï‚
  const bestMonthIndex = monthTotals.indexOf(Math.max(...monthTotals));
  const bestMonthName = monthNames[bestMonthIndex];
  const bestMonthSpan = document.getElementById("bestMonthLabel");
  if (bestMonthSpan) {
    bestMonthSpan.textContent = bestMonthName;
  }

  // â¤ Î•Ï„Î®ÏƒÎ¹Î± Î­ÏƒÎ¿Î´Î±
  const annualIncomeSpan = document.getElementById("annualIncome");
  if (annualIncomeSpan) {
    const totalAnnual = monthTotals.reduce((a, b) => a + b, 0);
    annualIncomeSpan.textContent = `${totalAnnual.toFixed(2)}â‚¬`;
  }

  // â¤ ÎœÎµÎ³Î±Î»ÏÏ„ÎµÏÎ· Ï€Î¿ÏƒÎ¿ÏƒÏ„Î¹Î±Î¯Î± Î±ÏÎ¾Î·ÏƒÎ· Î¼Î®Î½Î±
  let maxGrowth = -Infinity;
  let maxGrowthMonthIndex = -1;

  for (let i = 1; i < 12; i++) {
    const prev = monthTotals[i - 1];
    const current = monthTotals[i];

    if (prev > 0) {
      const growth = ((current - prev) / prev) * 100;
      if (growth > maxGrowth) {
        maxGrowth = growth;
        maxGrowthMonthIndex = i;
      }
    }
  }

  const maxGrowthSpan = document.getElementById("maxGrowthMonth");
  if (maxGrowthSpan) {
    if (maxGrowthMonthIndex !== -1) {
      const isPositive = maxGrowth >= 0;
      const sign = isPositive ? "+" : "âˆ’";
      const color = isPositive ? "limegreen" : "crimson";

      const svgArrow = isPositive
        ? `<svg width="16" height="16" viewBox="0 0 16 16" style="vertical-align: middle; margin-right: 4px;" xmlns="http://www.w3.org/2000/svg"><path fill="${color}" d="M8 2l4 6H9v6H7V8H4l4-6z"/></svg>`
        : `<svg width="16" height="16" viewBox="0 0 16 16" style="vertical-align: middle; margin-right: 4px;" xmlns="http://www.w3.org/2000/svg"><path fill="${color}" d="M8 14l-4-6h3V2h2v6h3l-4 6z"/></svg>`;

      maxGrowthSpan.innerHTML = `
        ${svgArrow}<span style="color:${color}; font-weight:bold;">
          ${monthNames[maxGrowthMonthIndex]} (${sign}${Math.abs(maxGrowth).toFixed(1)}%)
        </span>
      `;
    } else {
      maxGrowthSpan.textContent = "â€”";
    }
  }
}
function drawSecondChart(month) {
  const ctx = document.getElementById("secondChart").getContext("2d");

  const weeklyCounts = [0, 0, 0, 0];
  const weeklyUniqueIds = [new Set(), new Set(), new Set(), new Set()];

  for (const dateStr in mockData) {
    const [dayStr, monthStr, yearStr] = dateStr.split("/");
    const day = parseInt(dayStr);
    const m = parseInt(monthStr);
    const y = parseInt(yearStr);

    if (m === parseInt(month) && y === 2025) {
      let weekIndex = -1;
      if (day <= 7) weekIndex = 0;
      else if (day <= 14) weekIndex = 1;
      else if (day <= 21) weekIndex = 2;
      else weekIndex = 3;

      const entries = mockData[dateStr];

      entries.forEach(entry => {
        // âœ… Î‘Î³Î½Î¿Î¿ÏÎ¼Îµ Ï„Î¹Ï‚ Ï€Î»Î·ÏÏ‰Î¼Î­Ï‚ â€” Î¼ÎµÏ„ÏÎ¬Î¼Îµ Î¼ÏŒÎ½Î¿ ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚
        if (entry.type !== "income") {
          weeklyCounts[weekIndex]++;
          weeklyUniqueIds[weekIndex].add(entry.id);
        }
      });
    }
  }

  const weeklyAverages = weeklyCounts.map((c, i) => (c + weeklyUniqueIds[i].size) / 2);
  const maxY = Math.ceil(Math.max(...weeklyAverages) / 10) * 10 || 100;

  if (window.secondChartInstance) {
    window.secondChartInstance.destroy();
  }

  window.secondChartInstance = new Chart(ctx, {
    type: "line",
    data: {
      labels: ["1Î· Î•Î²Î´Î¿Î¼Î¬Î´Î±", "2Î· Î•Î²Î´Î¿Î¼Î¬Î´Î±", "3Î· Î•Î²Î´Î¿Î¼Î¬Î´Î±", "4Î· Î•Î²Î´Î¿Î¼Î¬Î´Î±"],
      datasets: [{
        label: "ÎœÎ­ÏƒÎ¿Ï‚ ÏŒÏÎ¿Ï‚ ÎšÎ±Ï„Î±Î³ÏÎ±Ï†ÏÎ½ & Î ÎµÎ»Î±Ï„ÏÎ½",
        data: weeklyAverages,
        borderColor: "rgba(156, 39, 176, 0.9)",
        backgroundColor: "rgba(156, 39, 176, 0.2)",
        borderWidth: 3,
        pointBackgroundColor: "white",
        pointBorderColor: "#fff",
        pointRadius: 5,
        pointHoverRadius: 10,
        pointHoverBorderColor: "#ff4081",
        pointHoverBackgroundColor: "#fff",
        pointHoverBorderWidth: 3,
        tension: 0.3,
        fill: true
      }]
    },
    options: {
      responsive: true,
      plugins: {
        tooltip: {
          enabled: true,
          mode: 'nearest',
          backgroundColor: "#333",
          titleColor: "#fff",
          bodyColor: "#fff",
          padding: 12,
          displayColors: false,
          callbacks: {
            label: context => {
              const index = context.dataIndex;
              const avg = weeklyAverages[index].toFixed(1);
              const total = weeklyCounts[index];
              const unique = weeklyUniqueIds[index].size;
              return [
                `Îœ.ÎŸ: ${avg}`,
                `ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚: ${total}`,
                `Î ÎµÎ»Î¬Ï„ÎµÏ‚: ${unique}`
              ];
            }
          }
        },
        title: {
          display: true,
          text: "Î‘Ï€ÏŒÎ´Î¿ÏƒÎ· Î“Ï…Î¼Î½Î±ÏƒÏ„Î·ÏÎ¯Î¿Ï…",
          color: "white",
          font: {
            size: 22,
            weight: "bold"
          }
        },
        legend: {
          labels: {
            color: "white",
            font: {
              size: 16
            }
          }
        },
        zoom: {
          pan: {
            enabled: true,
            mode: 'x',
            modifierKey: 'ctrl'
          },
          zoom: {
            wheel: { enabled: true },
            pinch: { enabled: true },
            mode: 'x'
          }
        }
      },
      interaction: {
        mode: 'nearest',
        axis: 'x',
        intersect: false
      },
      scales: {
        x: {
          ticks: { color: "white" },
          grid: { color: "rgba(255, 255, 255, 0.1)" }
        },
        y: {
          min: 0,
          ticks: {
            stepSize: 1,
            color: "white"
          },
          grid: {
            color: "rgba(255, 255, 255, 0.1)"
          }
        }
      }
    }
  });

  // â• Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÏƒÏ…Î½Î¿Î»Î¹ÎºÏÎ½ Î³Î¹Î± Î™Î¿ÏÎ»Î¹Î¿ 2025
  updateSecondChartTotals(Number(month));
}

function updateSecondChartTotals(monthNumber) {
  let totalEntries = 0;
  const allUniqueIds = new Set();

  for (const dateStr in mockData) {
    const [dStr, mStr, yStr] = dateStr.split("/");
    const m = parseInt(mStr, 10);
    const y = parseInt(yStr, 10);

    if (m === monthNumber && y === 2025) {
      // âœ… ÎœÎµÏ„ÏÎ¬Î¼Îµ Î¼ÏŒÎ½Î¿ ÎšÎ‘Î¤Î‘Î“Î¡Î‘Î¦Î•Î£ (ÎŸÎ§Î™ Ï€Î»Î·ÏÏ‰Î¼Î­Ï‚)
      const dayEntries = (mockData[dateStr] || []).filter(e => e.type !== 'income');
      totalEntries += dayEntries.length;
      dayEntries.forEach(e => allUniqueIds.add(e.id));
    }
  }
    // âœ… Î•Ï„Î®ÏƒÎ¹Î¿Î¹ Î ÎµÎ»Î¬Ï„ÎµÏ‚ (unique IDs ÏŒÎ»Î¿Ï… Ï„Î¿Ï… 2025)
  const year = 2025;
  const yearlyUniqueIds = new Set();

  for (const dateStr in mockData) {
    const [dStr, mStr, yStr] = dateStr.split("/");
    const y = parseInt(yStr, 10);
    if (y === year) {
      const entries = (mockData[dateStr] || []).filter(e => e.type !== 'income');
      entries.forEach(e => yearlyUniqueIds.add(e.id));
    }
  }

  // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· DOM
  const yearlySpan = document.getElementById("secondChartYearlyUniqueIds");
  if (yearlySpan) {
    yearlySpan.textContent = yearlyUniqueIds.size;
  }

  const monthlyAverage = totalEntries ? (totalEntries + allUniqueIds.size) / 2 : 0;
  // â¤ ÎšÎ±Î»ÏÏ„ÎµÏÎ¿Ï‚ Î¼Î®Î½Î±Ï‚ Î²Î¬ÏƒÎµÎ¹ Î¼Î­ÏƒÎ¿Ï… ÏŒÏÎ¿Ï… ÎºÎ±Ï„Î±Î³ÏÎ±Ï†ÏÎ½ & ID
let bestMonthIndex = -1;
let bestMonthlyAverage = -1;

for (let month = 1; month <= 12; month++) {
  let monthTotal = 0;
  const monthUniqueIds = new Set();

  for (const dateStr in mockData) {
    const [dStr, mStr, yStr] = dateStr.split("/");
    const m = parseInt(mStr, 10);
    const y = parseInt(yStr, 10);

    if (m === month && y === 2025) {
      const entries = (mockData[dateStr] || []).filter(e => e.type !== 'income');
      monthTotal += entries.length;
      entries.forEach(e => monthUniqueIds.add(e.id));
    }
  }

  const average = monthTotal ? (monthTotal + monthUniqueIds.size) / 2 : 0;

  if (average > bestMonthlyAverage) {
    bestMonthlyAverage = average;
    bestMonthIndex = month - 1; // Î³Î¹Î±Ï„Î¯ Î¿Î¹ Ï€Î¯Î½Î±ÎºÎµÏ‚ Î¾ÎµÎºÎ¹Î½Î¬Î½Îµ Î±Ï€ÏŒ 0
  }
}

const monthNames = [
  "Î™Î±Î½Î¿Ï…Î¬ÏÎ¹Î¿Ï‚", "Î¦ÎµÎ²ÏÎ¿Ï…Î¬ÏÎ¹Î¿Ï‚", "ÎœÎ¬ÏÏ„Î¹Î¿Ï‚", "Î‘Ï€ÏÎ¯Î»Î¹Î¿Ï‚",
  "ÎœÎ¬Î¹Î¿Ï‚", "Î™Î¿ÏÎ½Î¹Î¿Ï‚", "Î™Î¿ÏÎ»Î¹Î¿Ï‚", "Î‘ÏÎ³Î¿Ï…ÏƒÏ„Î¿Ï‚",
  "Î£ÎµÏ€Ï„Î­Î¼Î²ÏÎ¹Î¿Ï‚", "ÎŸÎºÏ„ÏÎ²ÏÎ¹Î¿Ï‚", "ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿Ï‚", "Î”ÎµÎºÎ­Î¼Î²ÏÎ¹Î¿Ï‚"
];

const bestMonthSpan = document.getElementById("secondChartBestMonth");
if (bestMonthSpan && bestMonthIndex !== -1) {
  bestMonthSpan.textContent = monthNames[bestMonthIndex];
}
// ğŸ§® Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î‘Î½Î´ÏÏÎ½ ÎºÎ±Î¹ Î“Ï…Î½Î±Î¹ÎºÏÎ½ Î±Ï€ÏŒ mockData Î³Î¹Î± Ï„Î¿Î½ Î¼Î®Î½Î±
let maleCount = 0;
let femaleCount = 0;

for (const dateStr in mockData) {
  const [day, month, year] = dateStr.split("/").map(x => parseInt(x));
  if (month === monthNumber && year === 2025) {
    const entries = mockData[dateStr] || [];
    entries.forEach(entry => {
      if (entry.type === "income") return;
      const gender = (entry.gender || "").toLowerCase();
      if (gender === "male" || gender === "Î¬Î½Î´ÏÎ±Ï‚") maleCount++;
      else if (gender === "female" || gender === "Î³Ï…Î½Î±Î¯ÎºÎ±") femaleCount++;
    });
  }
}
// ğŸ§® Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Ï€Î¿ÏƒÎ¿ÏƒÏ„Î¿Ï Ï€ÎµÎ»Î±Ï„ÏÎ½ Î¼Îµ >10 ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î­Ï‚ ÏƒÏ„Î¿Î½ Î¼Î®Î½Î±
const idCounts = new Map();

for (const dateStr in mockData) {
  const [dStr, mStr, yStr] = dateStr.split("/");
  const m = parseInt(mStr, 10);
  const y = parseInt(yStr, 10);

  if (m === monthNumber && y === 2025) {
    const entries = (mockData[dateStr] || []).filter(e => e.type !== 'income');
    entries.forEach(entry => {
      const id = entry.id;
      if (id) {
        idCounts.set(id, (idCounts.get(id) || 0) + 1);
      }
    });
  }
}

const totalUniqueIds = idCounts.size;
const heavyReturningIds = Array.from(idCounts.values()).filter(count => count > 10).length;
const heavyReturningRate = totalUniqueIds > 0 ? ((heavyReturningIds / totalUniqueIds) * 100).toFixed(1) : "0.0";

// ğŸ’¾ Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· HTML Ï€ÎµÎ´Î¯Î¿Ï…
const returningRateEl = document.getElementById("secondChartReturningRate");
if (returningRateEl) {
  returningRateEl.textContent = `${heavyReturningRate}%`;
}
    // âœ… Îœ.ÎŸ. Î•Ï€Î¹ÏƒÎºÎ­ÏˆÎµÏ‰Î½ Î±Î½Î¬ ID
const visitsPerId = allUniqueIds.size > 0 ? Math.floor(totalEntries / allUniqueIds.size) : 0;
  const visitsPerIdEl = document.getElementById("secondChartAvgVisitsPerId");
  if (visitsPerIdEl) {
    visitsPerIdEl.textContent = visitsPerId;
  }

// ğŸ’¾ Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· HTML Ï€ÎµÎ´Î¯Ï‰Î½
document.getElementById("secondChartMaleCount").textContent = maleCount;
document.getElementById("secondChartFemaleCount").textContent = femaleCount;

  // âœ… Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· DOM
  document.getElementById("secondChartTotalEntries").textContent = totalEntries;
  document.getElementById("secondChartUniqueIds").textContent = allUniqueIds.size;
  document.getElementById("secondChartMonthlyAverage").textContent = monthlyAverage.toFixed(1);
}
  const overlay = document.querySelector('.overlay');

  function updateOverlay() {
    const main = document.getElementById('mainContent');
    if (main && getComputedStyle(main).display !== 'none') {
      overlay.style.display = 'block'; // Î”ÎµÎ¯Î¾Îµ Ï„Î¿ Î¼ÏŒÎ½Î¿ ÏƒÏ„Î·Î½ Î±ÏÏ‡Î¹ÎºÎ®
    } else {
      overlay.style.display = 'none';  // Î‘Ï€ÏŒÎºÏÏ…ÏˆÎ­ Ï„Î¿ ÏƒÏ„Î¹Ï‚ Ï…Ï€ÏŒÎ»Î¿Î¹Ï€ÎµÏ‚
    }
  }

  // Î¤ÏÎ­Î¾Îµ Ï„Î·Î½ Ï€ÏÏÏ„Î· Ï†Î¿ÏÎ¬
  updateOverlay();

  // ÎšÎ¬Î¸Îµ Ï†Î¿ÏÎ¬ Ï€Î¿Ï… Î±Î»Î»Î¬Î¶ÎµÎ¹ Ï€ÏÎ¿Î²Î¿Î»Î® (ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ Î¼Îµ data-view)
  document.querySelectorAll('[data-view]').forEach(button => {
    button.addEventListener('click', () => {
      setTimeout(updateOverlay, 100); // Î¼Î¹ÎºÏÎ® ÎºÎ±Î¸Ï…ÏƒÏ„Î­ÏÎ·ÏƒÎ· Î³Î¹Î± Î½Î± Î±Î»Î»Î¬Î¾ÎµÎ¹ Î· ÏƒÎµÎ»Î¯Î´Î±
    });
  });

  // Î‘Î½ Î­Ï‡ÎµÎ¹Ï‚ ÎºÎ±Î¹ ÎºÎ¿Ï…Î¼Ï€Î¯ "Î£Ï€Î¯Ï„Î¹"
  const homeBtn = document.getElementById('homeButton');
  if (homeBtn) {
    homeBtn.addEventListener('click', () => {
      setTimeout(updateOverlay, 100);
    });
  }
</script>

</body>

</html>
