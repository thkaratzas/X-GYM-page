<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>XDISPLAY</title>

  <!-- Νέα γραμματοσειρά -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<link rel="preload" as="image" href="https://i.postimg.cc/Y9HZXm3q/f26ceef4-3445-4c9a-a15d-64ea3cac2a95-removalai-preview.png">
 <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    html, body {
      height: 100%;
      overflow: hidden;
      background: black;
    }

    .slideshow-container {
      position: fixed;
      width: 100%;
      height: 100%;
    }

    .slide {
      position: absolute;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 2s ease-in-out;
    }

    .slide.active {
      opacity: 1;
      z-index: 1;
    }

    .status-icon {
      width: 4vw;
      height: 4vw;
      vertical-align: middle;
      margin-left: 1vw;
    }
    .slide.portrait {
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
}

.slide.portrait .overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  backdrop-filter: blur(6px);
  background: rgba(0, 0, 0, 0.4); /* διαφάνεια + σκοτείνιασμα */
  z-index: 0;
}
#digitalClock {
  position: fixed;
  top: 1.5vh;
  left: 2vw;
  font-size: 4vw;
  font-family: 'Orbitron', sans-serif;
  color: #00ffff;
  background: rgba(0, 0, 0, 0.25);
  padding: 0.5vh 1vw;
  border-radius: 12px;
  z-index: 9999;
  text-shadow: 0 0 5px #00ffff, 0 0 6px #00ffff;
  box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
  backdrop-filter: blur(4px);
  letter-spacing: 0.1em;

  transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out;
  opacity: 1;
  transform: translateY(0);
}

/* Όταν θέλουμε να το κρύψουμε */
#digitalClock.hidden {
  opacity: 0;
  transform: translateY(-20px);
  pointer-events: none;
}

/* Όταν θέλουμε να το εμφανίσουμε */
#digitalClock.visible {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}


/* === Κείμενα popup με neon glow === */
.popup-line {
  font-family: 'Orbitron', sans-serif;
  font-size: 4.5vw;
  font-weight: 500;
  margin-bottom: 1.5vh;
  color: white;
}

.popup-line.active {
  color: #96e6a1;
  text-shadow: 0 0 1px #00ff88, 0 0 4px #00ff88, 0 0 15px #00ff88;
}

.popup-line.inactive {
  color: #ff7f7f;
  text-shadow: 0 0 1px #ff0040, 0 0 4px #ff0040, 0 0 15px #ff0040;
}
/* === Fancy POPUP v2 === */
@keyframes popIn {
  0%   { opacity: 0; transform: scale(.7); }
  60%  { opacity: 1; transform: scale(1.05); }
  100% { transform: scale(1); }
}
@keyframes neonPulse {
  0%,100% { text-shadow: 0 0 6px rgba(0,255,170,.8), 0 0 18px rgba(0,255,170,.35); }
  50% { text-shadow: 0 0 10px rgba(0,255,170,1), 0 0 26px rgba(0,255,170,.6); }
}
@keyframes neonPulseRed {
  0%,100% { text-shadow: 0 0 6px rgba(255,70,100,.9), 0 0 18px rgba(255,70,100,.4); }
  50% { text-shadow: 0 0 10px rgba(255,70,100,1), 0 0 26px rgba(255,70,100,.7); }
}
@keyframes ringSpin {
  0% { transform: rotate(0deg); opacity:.85; }
  50% { opacity:1; }
  100% { transform: rotate(360deg); opacity:.85; }
}
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
#popup-overlay {
  position: fixed; inset: 0; z-index: 9999;
  display: flex; align-items: center; justify-content: center;
  backdrop-filter: blur(4px);
-webkit-backdrop-filter: blur(4px);
  background: radial-gradient(1200px 800px at 50% 50%, rgba(0,255,200,.08), rgba(0,0,0,.85) 40%);
  animation: fadeBg .4s ease;
}
@keyframes fadeBg { from {opacity:0} to {opacity:1} }

.popup-card {
  position: relative;
  width: min(82vw, 900px);
  padding: 5vh 5vw;
  border-radius: 22px;
  background: rgba(0,0,0,.65);
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 10px 60px rgba(0,255,190,.25), inset 0 0 40px rgba(255,255,255,.02);
  animation: popIn .6s cubic-bezier(.17,.97,.37,1);
  overflow: hidden;
  will-change: transform, opacity;
transform: translateZ(0);
contain: paint;
}

.popup-card::before, .popup-card::after {
  content:""; position:absolute; inset:-40%;
  border-radius: 50%;
  border: 2px solid rgba(0,255,200,.35);
  filter: blur(2px);
  animation: ringSpin 12s linear infinite;
  animation-delay: .45s;
}
.popup-card::after {
  border-color: rgba(0,170,255,.28);
  animation-duration: 18s;
  mix-blend-mode: screen;
  animation-delay: .55s;
}
.popup-card.active {
  /* πράσινο-κυανό glow (όπως είχες) */
  border-color: rgba(0,255,200,.28);
  box-shadow: 0 10px 60px rgba(0,255,190,.25), inset 0 0 40px rgba(255,255,255,.02);
}

.popup-card.inactive {
  /* ΚΟΚΚΙΝΟ περίγραμμα + κόκκινο εξωτερικό glow */
  border-color: rgba(255,70,100,.35);
  box-shadow: 0 10px 60px rgba(255,70,100,.25), inset 0 0 40px rgba(255,255,255,.02);
}

/* Animated δαχτύλιοι (οι πριν/μετά) */
.popup-card.active::before,
.popup-card.active::after {
  border-color: rgba(0,255,200,.35);
}
.popup-card.active::after {
  border-color: rgba(0,170,255,.28); /* δεύτερος δακτύλιος πιο κυανός */
}

/* ⛔ Inactive: ΚΟΚΚΙΝΟΙ και οι δύο δαχτύλιοι */
.popup-card.inactive::before,
.popup-card.inactive::after {
  border-color: rgba(255,70,100,.35);
}

/* Hover wipe χρώμα ανά state */
.popup-card.active .close-wipe {
  background: radial-gradient(200px 200px at var(--x,50%) var(--y,50%), rgba(0,255,150,.10), transparent 60%);
}
.popup-card.inactive .close-wipe {
  background: radial-gradient(200px 200px at var(--x,50%) var(--y,50%), rgba(255,70,100,.10), transparent 60%);
}

/* Προαιρετικά: και το overlay να έχει ελαφρύ tint ανά state */
#popup-overlay.active {
  background: radial-gradient(1200px 800px at 50% 50%, rgba(0,255,200,.08), rgba(0,0,0,.85) 40%);
}
#popup-overlay.inactive {
  background: radial-gradient(1200px 800px at 50% 50%, rgba(255,70,100,.08), rgba(0,0,0,.85) 40%);
}

.popup-title {
  font-family: 'Orbitron', sans-serif;
  font-size: clamp(32px, 6vw, 72px);
  letter-spacing: .02em;
  margin: 0 0 1.2vh 0;
  line-height: 1.05;
  background: linear-gradient(90deg, #fff, #89ffe6, #00ffb0, #ffffff);
  -webkit-background-clip: text; background-clip: text; color: transparent;
  background-size: 200% 100%;
  animation: shimmer 2.5s linear infinite;
}
.popup-title.active {
  position: relative;
  z-index: 2;
  animation: shimmer 2.5s linear infinite, neonPulse 1.6s ease-in-out infinite;
}
.popup-title.inactive {
  position: relative;
  z-index: 2;
  background: linear-gradient(90deg, #fff, #ff8ca5, #ff4664, #ffffff);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: shimmer 2.5s linear infinite, neonPulseRed 1.6s ease-in-out infinite;
}

.popup-line {
  font-family: 'Poppins', sans-serif;
  font-size: clamp(18px, 3.3vw, 34px);
  color: #e9fffb; opacity: 0; transform: translateY(10px);
  margin: .6vh 0;
  transition: opacity .5s, transform .5s;
}
.popup-line.show { opacity: 1; transform: translateY(0); }
.popup-line b { font-weight: 700; }

.badge {
  display:inline-flex; align-items:center; gap:.6rem;
  padding:.5rem 1rem; border-radius:999px;
  font-size: clamp(14px, 2.4vw, 22px);
  margin-top:1vh;
  backdrop-filter: blur(3px);
}
.badge.active { color:#0d1; background: rgba(0,255,150,.12); border:1px solid rgba(0,255,150,.35); }
.badge.inactive { color:#f66; background: rgba(255,70,100,.12); border:1px solid rgba(255,70,100,.35); }

.close-wipe {
  position:absolute; inset:-2px; border-radius: inherit;
  pointer-events:none; opacity:0;
  background: radial-gradient(200px 200px at var(--x,50%) var(--y,50%), rgba(255,255,255,.06), transparent 60%);
  transition: opacity .4s;
}
.popup-card:hover .close-wipe { opacity:1; }
/* Αφαιρεί το glow και κρατά λευκό χρώμα μόνο για τις σειρές κειμένου */
.popup-line {
  color: #ffffff !important;
  text-shadow: none !important;
}

/* ===== Loading Popup (glass + neon ring) ===== */
#popup-loading {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,.78);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  z-index: 9999;
  opacity: 0;
  animation: loadingFadeIn .35s ease forwards;
}

.loading-card {
  position: relative;
  width: min(80vw, 680px);
  padding: min(4vh, 40px) min(4vw, 40px);
  border-radius: 22px;
  background: rgba(10, 14, 22, .65);
  box-shadow: 0 10px 40px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.06);
  overflow: hidden;
  transform: translateY(10px) scale(.98);
  animation: cardLift .5s cubic-bezier(.2,.8,.2,1) .1s forwards;
}

/* Neon spinning ring border */
.loading-card::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 24px;
  background: conic-gradient(from 0deg, #00f0ff, #74f2ce, #00ffa3, #00f0ff);
  filter: blur(6px) saturate(1.2);
  animation: spin 2.4s linear infinite;
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  padding: 2px;
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  opacity: .55;
}

/* Inner glass layer */
.loading-inner {
  position: relative;
  z-index: 1;
}

/* Title + dots */
.loading-title {
  font-family: 'Orbitron', sans-serif;
  font-size: clamp(22px, 4.2vw, 40px);
  color: #eaffff;
  text-align: center;
  letter-spacing: .06em;
  margin: 0 0 .6em;
  text-shadow: 0 0 6px rgba(0,255,214,.45);
  animation: glowPulse 1.6s ease-in-out infinite;
}

/* Sub text */
.loading-sub {
  font-size: clamp(14px, 2.2vw, 18px);
  color: rgba(255,255,255,.8);
  text-align: center;
  margin-bottom: 1.2em;
}

/* Progress bar with shimmer */
.loading-progress {
  height: 12px;
  width: 100%;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  overflow: hidden;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}
.loading-bar {
  height: 100%;
  width: 0%;
  border-radius: inherit;
  background: linear-gradient(90deg, rgba(0,255,214,.2), rgba(0,255,214,.9), rgba(0,255,214,.2));
  animation: sweep 2.2s ease-in-out infinite, shimmer 1.2s linear infinite;
}

/* Keyframes */
@keyframes loadingFadeIn {
  to { opacity: 1; }
}
@keyframes cardLift {
  to { transform: translateY(0) scale(1); }
}
@keyframes spin {
  to { transform: rotate(360deg); }
}
@keyframes glowPulse {
  0%,100% { text-shadow: 0 0 6px rgba(0,255,214,.35); }
  50% { text-shadow: 0 0 14px rgba(0,255,214,.75); }
}

@keyframes sweep {
  0%   { width: 0%; }
  50%  { width: 78%; }
  100% { width: 100%; }
}
@keyframes shimmer {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.35); }
  100% { filter: brightness(1); }
}

/* Out animation */
#popup-loading.hide {
  opacity: 0;
  transition: opacity .3s ease;
}
/* Λογότυπο λιονταριού στο popup */
.holo-logo {
  width: clamp(60px, 14vw, 110px);
  height: clamp(60px, 14vw, 110px);
  border-radius: 50%;
  overflow: hidden;
  margin: 0 auto 1em;
  border: 3px solid #00ffd5;
  box-shadow: 0 0 15px rgba(0,255,214,.6), inset 0 0 12px rgba(0,255,214,.4);
  animation: logoPulse 2.8s ease-in-out infinite, logoRotate 12s linear infinite;
}

.holo-logo img {
  width: 100%;
  height: 100%;
  object-fit: contain;  /* 👈 αντί για cover για πιο “ξε-ζουμαρισμένο” */
  background-color: #000; /* προαιρετικό για να γεμίζει γύρω γύρω */
  padding: 6%; /* λίγο “μαξιλάρι” γύρω από το λιοντάρι */
  box-sizing: border-box;
}

/* Keyframes για logo */
@keyframes logoPulse {
  0%,100% { box-shadow: 0 0 15px rgba(0,255,214,.6), inset 0 0 12px rgba(0,255,214,.4); }
  50%     { box-shadow: 0 0 25px rgba(0,255,214,.9), inset 0 0 20px rgba(0,255,214,.6); }
}

@keyframes logoRotate {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}
/* ============ XDISPLAY • Neo Leaderboard ============ */
/* ΟΛΑ νέα prefixes για να μην “πιάνουν” τα παλιά: xlb- */

:root{
  --xlb-bg:#0c1118;
  --xlb-panel:#121a24;
  --xlb-ink:#eaf6ff;
  --xlb-muted:rgba(234,246,255,0.64);
  --xlb-glow:#57ffd6;
  --xlb-accent:#5ff0ff;
  --xlb-accent-2:#9bf7c9;
  --xlb-gold:#ffd166;
  --xlb-silver:#d6e4f0;
  --xlb-bronze:#c68b59;
}

/* slide wrapper */
.xlb-slide{
  display:flex; align-items:center; justify-content:center;
  padding:4vh 5vw;
  position:relative;
  overflow:hidden;
  background: radial-gradient(1200px 800px at 50% 50%, rgba(95,240,255,.08), var(--xlb-bg) 45%);
}

/* animated pulse lines background (αντί για περιστρεφόμενο τετράγωνο) */

@keyframes xlbSweep {
  0% { background-position: 0 0; }
  100% { background-position: 800px 0; }
}

/* κεντρικό panel */
.xlb-panel{
  width:min(92vw,1000px);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.08);
  border-radius:22px;
  box-shadow:
    0 10px 40px rgba(0,0,0,.45),
    inset 0 0 0 1px rgba(255,255,255,.04);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  position:relative;
  overflow:hidden;
}

/* λεπτό neon frame (πολύ πιο διακριτικό) */
.xlb-panel::before{
  content:"";
  position:absolute; inset:0; pointer-events:none;
  border-radius:inherit;
  padding:1px;
  background: conic-gradient(from 0deg, var(--xlb-accent), var(--xlb-accent-2), var(--xlb-accent));
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  opacity:.28;
  filter: blur(2px);
}

/* header */
.xlb-head{
  padding:1.4rem 1.6rem 0.6rem 1.6rem;
  text-align:center;
  position:relative;
}

.xlb-kicker{
  font-size: clamp(12px,1.8vw,14px);
  letter-spacing:.28em;
  text-transform:uppercase;
  color: var(--xlb-muted);
}

.xlb-title{
  font-family:'Orbitron',sans-serif;
  font-size: clamp(28px,5vw,48px);
  letter-spacing:.04em;
  color:var(--xlb-ink);
  text-shadow: 0 0 12px rgba(95,240,255,.35);
  margin-top:.2rem;
}

/* λεπτή animated underline */
.xlb-underline{
  width:140px; height:3px; margin:.8rem auto 0;
  background:linear-gradient(90deg, transparent, var(--xlb-accent), transparent);
  filter: drop-shadow(0 0 6px rgba(95,240,255,.6));
  animation: xlbUnderline 2.6s ease-in-out infinite;
  border-radius:999px;
  opacity:.85;
}
@keyframes xlbUnderline{
  0%,100%{ transform:scaleX(.6); opacity:.7; }
  50%{ transform:scaleX(1); opacity:1; }
}

/* πίνακας */
.xlb-list{ padding: 1rem 1.2rem 1.4rem; }

.xlb-item{
  --pct: 0;                 /* Θα έρθει από inline style */
  display:grid;
  grid-template-columns: 88px 1fr 112px;
  align-items:center;
  gap:.9rem;
  padding: .85rem 1rem;
  margin:.55rem 0;
  background: rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.06);
  border-radius:16px;
  color:var(--xlb-ink);
  transform: translateY(8px);
  opacity:0;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
  position:relative;
  overflow:hidden;
}

/* row in */
.xlb-item.in{
  animation: xlbRowIn .45s cubic-bezier(.2,.8,.2,1) var(--d, 0ms) forwards;
}
@keyframes xlbRowIn{ to{ transform:translateY(0); opacity:1; } }

/* progress meter (λεπτή γραμμή με sheen) */
.xlb-item::after{
  content:"";
  position:absolute; left:0; right:0; bottom:0;
  height:3px;
  background: linear-gradient(90deg,
    rgba(95,240,255,.2),
    rgba(95,240,255,.85),
    rgba(155,247,201,.85),
    rgba(95,240,255,.2)
  );
  width: calc(var(--pct) * 1%);
  box-shadow: 0 0 10px rgba(95,240,255,.5);
  transition: width .8s ease-out;
}

/* rank badge – κύκλος με λεπτό gradient ring */
.xlb-rank{
  width:64px; height:64px; border-radius:50%;
  display:grid; place-items:center;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.16), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.08);
  position:relative;
  font-weight:800;
  font-size:20px;
  letter-spacing:.02em;
}
.xlb-rank::before{
  content:"";
  position:absolute; inset:-2px; border-radius:inherit;
  background: conic-gradient(from 0deg, var(--xlb-accent), var(--xlb-accent-2), var(--xlb-accent));
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  padding:2px; opacity:.35; filter: blur(1px);
}

.xlb-name{
  font-size: clamp(14px,2.6vw,18px);
  letter-spacing:.02em;
}
.xlb-count{
  justify-self:end;
  font-weight:800;
  font-size: clamp(16px,3vw,20px);
  color: var(--xlb-ink);
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  padding:.35rem .75rem;
  border-radius:12px;
}

/* Top 3 styles */
.xlb-item.gold   .xlb-rank{ color:var(--xlb-gold); }
.xlb-item.silver .xlb-rank{ color:var(--xlb-silver); }
.xlb-item.bronze .xlb-rank{ color:var(--xlb-bronze); }

/* rank-up effect (τρέχει ΜΟΝΟ όταν η slide είναι active) */
@keyframes xlbRankUp {
  0%   { transform: translateY(0); box-shadow: inset 0 0 0 1px rgba(95,240,255,.18); }
  25%  { transform: translateY(-8px); box-shadow: 0 0 26px rgba(95,240,255,.72); }
  60%  { transform: translateY(-3px); box-shadow: 0 0 14px rgba(95,240,255,.48); }
  100% { transform: translateY(0); box-shadow: inset 0 0 0 1px rgba(95,240,255,.18); }
}
.xlb-item.rank-up{ animation: xlbRankUp .9s ease-out; animation-play-state: paused; }
.slide.leaderboard-slide.active .xlb-item.rank-up{ animation-play-state: running; }

/* responsive tweaks */
@media (max-width:720px){
  .xlb-item{ grid-template-columns: 72px 1fr 86px; }
  .xlb-rank{ width:56px; height:56px; font-size:18px; }
}
/* ===== Pro Mode add-ons ===== */

/* grid με avatar στήλη */
.xlb-item{ grid-template-columns: 88px 56px 1fr 112px; }

/* πιο ευδιάκριτα ονόματα */
.xlb-name{
  font-size: clamp(16px, 3vw, 22px);
  font-weight: 700;
  letter-spacing: .01em;
  color: #f5fbff;
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
  display: flex; align-items: center; gap: .5rem;
}

/* avatar bubble */
.xlb-avatar{
  width: 48px; height: 48px; border-radius: 50%;
  position: relative; overflow: hidden;
  display: grid; place-items: center;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.16), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.10);
  box-shadow: 0 4px 12px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.05);
}
.xlb-avatar::before{
  content:"";
  position:absolute; inset:-2px; border-radius:50%;
  padding:2px;
  background: conic-gradient(from 0deg, #6af6ff, #a9ffd6, #6af6ff);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  opacity:.35; filter: blur(1px);
}
.xlb-avatar img{ width:100%; height:100%; object-fit: cover; }

/* delta badge (⇧ / ⇩) δίπλα στο όνομα */
.xlb-delta{
  font-size: .9em;
  font-weight: 800;
  padding: .12rem .45rem;
  border-radius: 999px;
  line-height: 1;
  letter-spacing: .02em;
  border: 1px solid;
}
.xlb-delta.up{
  color:#0fd67a; background: rgba(15,214,122,.10); border-color: rgba(15,214,122,.35);
}
.xlb-delta.down{
  color:#ff6b7a; background: rgba(255,107,122,.12); border-color: rgba(255,107,122,.38);
}
.xlb-delta.same{
  color:#9db4c2; background: rgba(157,180,194,.10); border-color: rgba(157,180,194,.28);
}

/* custom SVG medals: δίνουμε πιο “premium” look στον κύκλο rank */
.xlb-item.medal .xlb-rank{
  background: radial-gradient(circle at 40% 35%, rgba(255,255,255,.22), rgba(255,255,255,.06));
}
.xlb-rank svg{ width: 30px; height: 30px; }

/* ελαφρώς πιο φωτεινά στοιχεία */
.xlb-count{
  background: rgba(255,255,255,.08);
  border-color: rgba(255,255,255,.16);
}
/* A. Ονόματα top-3 να ταιριάζουν με τα μετάλλια (λίγο πιο φωτεινά + διακριτικό glow) */
.xlb-item.medal.gold   .xlb-name .xlb-name-text { color: #ffd54a; text-shadow: 0 0 10px rgba(255, 213, 74, .25); }
.xlb-item.medal.silver .xlb-name .xlb-name-text { color: #d0d8e0; text-shadow: 0 0 10px rgba(208, 216, 224, .22); }
.xlb-item.medal.bronze .xlb-name .xlb-name-text { color: #d19a66; text-shadow: 0 0 10px rgba(209, 154, 102, .22); }

/* B. ΜΙΝΙΜΑΛ γραμμές μόνο στις γωνίες */
.xlb-panel { position: relative; }
.xlb-corners { pointer-events: none; position: absolute; inset: 0; }
.xlb-corners .c {
  position: absolute;
  width: 140px; height: 140px; /* “πεδίο” γωνίας, οι ίδιες οι γραμμές είναι ψιλές */
  opacity: .9; filter: drop-shadow(0 0 6px rgba(0, 255, 214, .18));
}

/* κάθε γωνία έχει 2 λεπτές γραμμές (οριζόντια & κάθετη) με ελαφρύ pulse */
@keyframes cornerPulse { 
  0%,100% { opacity: .55; } 
  50% { opacity: .9; } 
}

.xlb-corners .c::before,
.xlb-corners .c::after {
  content: "";
  position: absolute;
  background: linear-gradient(90deg, rgba(0,255,214,.0), rgba(0,255,214,.8), rgba(0,255,214,.0));
  animation: cornerPulse 3.2s ease-in-out infinite;
}

/* top-left */
.xlb-corners .tl { top: 10px; left: 10px; }
.xlb-corners .tl::before { /* οριζόντια γραμμή */
  top: 0; left: 0; width: 120px; height: 3px;
}
.xlb-corners .tl::after {  /* κάθετη γραμμή */
  top: 0; left: 0; width: 3px; height: 120px;
  background: linear-gradient(180deg, rgba(0,255,214,.0), rgba(0,255,214,.8), rgba(0,255,214,.0));
}

/* top-right */
.xlb-corners .tr { top: 10px; right: 10px; transform: scaleX(-1); }

/* bottom-left */
.xlb-corners .bl { bottom: 10px; left: 10px; transform: scaleY(-1); }

/* bottom-right */
.xlb-corners .br { bottom: 10px; right: 10px; transform: scale(-1); }

/* C. Αφαίρεση παλιών moving lines (αν υπήρχαν σε pseudo-elements) */
.xlb-panel::before,
.xlb-panel::after {
  content: none !important;
}
.xlb-item::after{ height: 4px; } /* λίγο πιο “γεμάτη” μπάρα */
@supports not ((backdrop-filter: blur(2px)) or (-webkit-backdrop-filter: blur(2px))) {
  #popup-overlay { backdrop-filter: none; -webkit-backdrop-filter: none; }
}
  </style>
</head>
<body>
  <div id="digitalClock"></div>

  <div class="slideshow-container">
    <div class="slide portrait" style="background-image: url('https://i.postimg.cc/NFXhZL3y/IMG-4924-2.jpg')"></div>
    <div class="slide portrait" style="background-image: url('https://i.postimg.cc/mZ1GP6Pb/IMG-4925.jpg')"></div>
    <div class="slide portrait" style="background-image: url('https://i.postimg.cc/wjMFMJbN/IMG-4936.jpg')"></div>
        <div class="slide portrait" style="background-image: url('https://i.postimg.cc/9XrB1x04/IMG-4937.jpg')"></div>
    <div class="slide" style="background-image: url('https://i.postimg.cc/025nj58G/processed-2-DA30989-5818-4-DF0-A5-A1-A9-A04-F93091-B.jpg')"></div>
        <div class="slide" style="background-image: url('https://i.postimg.cc/631b9KMG/Your-paragraph-text-2.jpg')"></div>
    <div class="slide" style="background-image: url('https://i.postimg.cc/02S01bpP/IMG-4933.jpg')"></div>
      <div class="slide" style="background-image: url('https://i.postimg.cc/SKZpMBLK/IMG-4926.jpg')"></div>


    <!-- ⬇️ Το Leaderboard θα προστεθεί εδώ από την populateLeaderboard() -->
  </div>

  <script>
    // Slideshow
let slides = [];
let currentSlide = 0;
let slideTimer;

function showSlide(index) {
  clearTimeout(slideTimer);

  slides.forEach((slide) => slide.classList.remove('active'));

  const slideEl = slides[index];
  slideEl.classList.add('active');

  const isLeaderboard = slideEl.classList.contains("leaderboard-slide");
  const clock = document.getElementById("digitalClock");
  if (clock) {
    if (isLeaderboard) {
      clock.classList.remove("visible");
      clock.classList.add("hidden");
    } else {
      clock.classList.remove("hidden");
      clock.classList.add("visible");
    }
  }

  // ΜΟΝΟ αυτό αλλάξαμε: +5s στο leaderboard
  const BASE = 25000;      // όσο μένουν τα υπόλοιπα
  const EXTRA = 5000;     // +5s μόνο για leaderboard
  const duration = isLeaderboard ? (BASE + EXTRA) : BASE;

  if (isLeaderboard && typeof retriggerRankAnims === 'function') {
    setTimeout(() => retriggerRankAnims(slideEl), 80);
  }

  slideTimer = setTimeout(() => {
    currentSlide = (currentSlide + 1) % slides.length;
    showSlide(currentSlide);
  }, duration);
}
function retriggerRankAnims(root = document) {
  root.querySelectorAll('.xlb-item.rank-up').forEach(el => {
    el.style.animation = 'none';
    void el.offsetHeight;
    el.style.animation = '';
  });
}

window.addEventListener("DOMContentLoaded", () => {
  checkSubscription();              // Αν θέλεις και το popup
  resetMonthlyDataIfNeeded();      // ✅ Πρώτα ελέγχεις αν θα γίνει reset
  populateLeaderboard();           // ✅ Μετά δημιουργείς το leaderboard

  slides = document.querySelectorAll('.slide'); // ✅ Τώρα όλα τα slides έχουν φορτωθεί
  showSlide(currentSlide);                      // ✅ Τρέχει το slider σωστά

  // 🔁 Ζωντανή ενημέρωση leaderboard κάθε 5 δευτερόλεπτα
  let lastLeaderboardState = JSON.stringify(getMonthlyCounts());

  setInterval(() => {
    const currentState = JSON.stringify(getMonthlyCounts());
    if (currentState !== lastLeaderboardState) {
      const oldSlide = document.querySelector(".leaderboard-slide");
      if (oldSlide) oldSlide.remove();
      populateLeaderboard();
      slides = document.querySelectorAll('.slide'); // ❗ πρέπει να ανανεώνεται ο πίνακας των slides
      lastLeaderboardState = currentState;
      console.log("🔄 Leaderboard updated live!");
    }
  }, 5000);
});

    // Name formatting rules
    function formatName(name) {
      if (!name || typeof name !== "string") return name;
      name = name.trim().toUpperCase();

      const exceptions = ["ΣΤΕΛΙΟΣ", "ΣΤΕΡΓΙΟΣ", "ΜΙΛΤΟΣ", "ΧΡΗΣΤΟΣ", "ΣΤΡΑΤΟΣ", "ΠΑΥΛΟΣ", "ΓΙΩΡΓΟΣ","ΝΙΚΟΣ","ΜΑΝΟΣ","ΑΛΕΚΟΣ","ΘΑΝΟΣ"];

      if (name.endsWith("ΟΣ")) {
        if (exceptions.includes(name)) {
          return name.slice(0, -1); // ΣΤΕΛΙΟΣ → ΣΤΕΛΙΟ
        } else {
          return name.slice(0, -2) + "Ε"; // ΝΙΚΟΣ → ΝΙΚΕ
        }
      }

      if (name.endsWith("ΗΣ")) {
        return name.slice(0, -1); // ΠΑΝΑΓΗΣ → ΠΑΝΑΓΗ
      }

      if (name.endsWith("ΑΣ")) {
        return name.slice(0, -1); // ΘΑΝΑΣΗΣ → ΘΑΝΑΣΗ
      }

      return name;
    }

    // Show popup
function showPopup(name, isActive) {
  // Καλημέρα/Καλησπέρα
  const hour = new Date().getHours();
  const greeting = hour < 12 ? "Καλημέρα" : "Καλησπέρα";

  // Μόνο μικρό όνομα (σε περίπτωση που ήρθε full name)
  const firstOnly = String(name || "").trim().split(/\s+/)[0] || "";
  const fixedName = formatName(firstOnly);

  // Overlay
const overlay = document.createElement("div");
overlay.id = "popup-overlay";
overlay.classList.add(isActive ? "active" : "inactive"); // <-- ΠΡΟΣΘΗΚΗ
  overlay.addEventListener("mousemove", (e) => {
    const r = overlay.getBoundingClientRect();
    const card = overlay.querySelector(".close-wipe");
    if (card) {
      card.style.setProperty("--x", `${e.clientX - r.left}px`);
      card.style.setProperty("--y", `${e.clientY - r.top}px`);
    }
  });

  // Κάρτα
// Κάρτα
const card = document.createElement("div");
card.className = `popup-card ${isActive ? "active" : "inactive"}`; // <-- ΠΡΟΣΘΗΚΗ

  // Περιεχόμενο
 card.innerHTML = `
  <div class="close-wipe"></div>

  <div class="popup-title ${isActive ? "active" : "inactive"}">
    ${greeting} ${fixedName}
  </div>

  <div class="popup-line ${isActive ? "active" : "inactive"}" style="transition-delay:.08s">
    Η συνδρομή σου είναι <b>${isActive ? "ενεργή" : "ανενεργή"}</b>.
  </div>

  <div class="popup-line ${isActive ? "active" : "inactive"}" style="transition-delay:.16s">
    ${isActive ? "Καλή προπόνηση!" : "Η ομάδα μας σε περιμένει!"}
  </div>

  <div class="popup-line ${isActive ? "active" : "inactive"}" style="transition-delay:.24s">
    <span class="badge ${isActive ? "active" : "inactive"}">
      ${isActive ? "🟢 Active Member" : "🔴 Inactive Member"}
    </span>
  </div>
`;

  overlay.appendChild(card);
  document.body.appendChild(overlay);

  // staggered εμφάνιση γραμμών
  requestAnimationFrame(() => {
    overlay.querySelectorAll(".popup-line").forEach((el) => {
      // δώσε χρόνο στην είσοδο της κάρτας
      setTimeout(() => el.classList.add("show"), parseFloat(el.style.transitionDelay || "0") * 1000 + 60);
    });
  });

  // Αυτόματο κλείσιμο
  setTimeout(() => {
    overlay.style.opacity = "0";
    overlay.style.transition = "opacity .4s ease";
    setTimeout(() => overlay.remove(), 400);
    localStorage.removeItem("lastScannedId");
  }, 4800);
}

  function getMonthlyCounts() {
  const raw = localStorage.getItem("attendanceData"); // ✅ ΠΡΟΣΟΧΗ εδώ
  if (!raw) return {};

  const data = JSON.parse(raw);
  const now = new Date();
  const thisMonth = now.getMonth() + 1;
  const thisYear = now.getFullYear();

  const counts = {}; // { id: { name: "...", count: n } }

  for (const dateStr in data) {
    const [day, month, year] = dateStr.split("/").map(Number);
    if (month === thisMonth && year === thisYear) {
      data[dateStr].forEach(entry => {
        if (entry.id && entry.name && entry.type !== "income") {
          if (!counts[entry.id]) {
            counts[entry.id] = { name: entry.name, count: 0 };
          }
          counts[entry.id].count += 1;
        }
      });
    }
  }

  return counts;
}
function resetMonthlyDataIfNeeded() {
  const now = new Date();
  const currentMonth = now.getMonth();
  const currentYear = now.getFullYear();

  const lastReset = localStorage.getItem("lastLeaderboardReset");
  const [lastYear, lastMonth] = lastReset ? lastReset.split("-").map(Number) : [];

  if (lastYear !== currentYear || lastMonth !== currentMonth) {
    const data = JSON.parse(localStorage.getItem("mockData") || "{}");

    // Κρατάμε μόνο entries του τρέχοντος μήνα
    const newData = {};
    for (const date in data) {
      const [day, month, year] = date.split("/").map(Number);
      if (month - 1 === currentMonth && year === currentYear) {
        newData[date] = data[date];
      }
    }

    localStorage.setItem("mockData", JSON.stringify(newData));
    localStorage.setItem("lastLeaderboardReset", `${currentYear}-${currentMonth}`);
    console.log("🧹 Μηδενίστηκαν τα δεδομένα leaderboard για νέο μήνα.");
  }
}
// Βάλε αυτό ΚΑΠΟΥ ΜΙΑ ΦΟΡΑ πάνω από την populateLeaderboard
let previousRanks = {}; 

// Προαιρετικά: map id->avatar URL. Αν δεν υπάρχει, θα φτιάξουμε initials avatar.
// --- Avatars (εικόνες ή initials) ---
const AVATAR_MAP = JSON.parse(localStorage.getItem("avatarMap") || "{}");

function makeInitialAvatarDataURI(fullName = "") {
  const initials = (fullName || "?")
    .trim()
    .split(/\s+/)
    .slice(0,2)
    .map(s => s[0]?.toUpperCase() || "")
    .join("");

  // σταθερή απόχρωση ανά όνομα
  let hash = 0;
  for (let i = 0; i < fullName.length; i++) hash = (hash * 31 + fullName.charCodeAt(i)) | 0;
  const hue = Math.abs(hash) % 360;

  const svg = `
    <svg xmlns='http://www.w3.org/2000/svg' width='128' height='128'>
      <defs>
        <linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>
          <stop offset='0%' stop-color='hsl(${hue}, 75%, 62%)'/>
          <stop offset='100%' stop-color='hsl(${(hue+40)%360}, 85%, 58%)'/>
        </linearGradient>
      </defs>
      <rect width='100%' height='100%' fill='url(#g)'/>
      <text x='50%' y='54%' dominant-baseline='middle' text-anchor='middle'
            font-family='Poppins, Arial, sans-serif' font-size='56' fill='rgba(255,255,255,.95)'
            style='paint-order: stroke; stroke: rgba(0,0,0,.25); stroke-width: 3px;'>
        ${initials}
      </text>
    </svg>`;
  return "data:image/svg+xml;utf8," + encodeURIComponent(svg);
}

function getAvatarFor(id, name){
  const url = AVATAR_MAP[id];
  return url && typeof url === "string" ? url : makeInitialAvatarDataURI(name || "");
}

// --- Premium medal SVGs (gold/silver/bronze) ---
const MEDAL_SVGS = {
  gold: `
    <svg viewBox="0 0 64 64" aria-hidden="true">
      <defs>
        <radialGradient id="mg" cx="50%" cy="40%" r="60%">
          <stop offset="0%" stop-color="#fff3c4"/>
          <stop offset="45%" stop-color="#ffd46b"/>
          <stop offset="100%" stop-color="#caa03a"/>
        </radialGradient>
      </defs>
      <circle cx="32" cy="32" r="20" fill="url(#mg)"/>
      <path d="M32 16 L36 28 L48 28 L38 36 L42 48 L32 40 L22 48 L26 36 L16 28 L28 28 Z"
            fill="rgba(0,0,0,.08)"/>
    </svg>`,
  silver: `
    <svg viewBox="0 0 64 64" aria-hidden="true">
      <defs>
        <radialGradient id="ms" cx="50%" cy="40%" r="60%">
          <stop offset="0%" stop-color="#f5fbff"/>
          <stop offset="45%" stop-color="#d9e6f2"/>
          <stop offset="100%" stop-color="#aab7c2"/>
        </radialGradient>
      </defs>
      <circle cx="32" cy="32" r="20" fill="url(#ms)"/>
      <path d="M32 16 L36 28 L48 28 L38 36 L42 48 L32 40 L22 48 L26 36 L16 28 L28 28 Z"
            fill="rgba(0,0,0,.08)"/>
    </svg>`,
  bronze: `
    <svg viewBox="0 0 64 64" aria-hidden="true">
      <defs>
        <radialGradient id="mb" cx="50%" cy="40%" r="60%">
          <stop offset="0%" stop-color="#ffe2c9"/>
          <stop offset="45%" stop-color="#d9a373"/>
          <stop offset="100%" stop-color="#9b6a3a"/>
        </radialGradient>
      </defs>
      <circle cx="32" cy="32" r="20" fill="url(#mb)"/>
      <path d="M32 16 L36 28 L48 28 L38 36 L42 48 L32 40 L22 48 L26 36 L16 28 L28 28 Z"
            fill="rgba(0,0,0,.08)"/>
    </svg>`
};

// --- PRO MODE Leaderboard με avatars + delta badges ---
function populateLeaderboard() {
  const old = document.querySelector(".leaderboard-slide");
  if (old) old.remove();

  const counts = getMonthlyCounts();
  const sorted = Object.entries(counts)
    .sort((a, b) => (b[1].count - a[1].count) || a[1].name.localeCompare(b[1].name, "el"))
    .slice(0, 10);

  const newRanks = {};
  sorted.forEach(([id, info], i) => (newRanks[id] = i));
  const maxCount = sorted.length ? Math.max(...sorted.map(([_, v]) => v.count)) : 1;

  const slide = document.createElement("div");
  slide.className = "slide leaderboard-slide xlb-slide";

  const rowsHTML = sorted.map(([id, info], i) => {
    const medalClass = i === 0 ? "gold" : i === 1 ? "silver" : i === 2 ? "bronze" : "";
    const isMedal   = i < 3;
    const pct       = maxCount ? Math.round((info.count / maxCount) * 100) : 0;

    let delta = 0, deltaClass = "same", deltaText = "–";
    if (previousRanks[id] !== undefined) {
      delta = previousRanks[id] - newRanks[id];
      if (delta > 0) { deltaClass = "up";   deltaText = "⇧" + delta; }
      else if (delta < 0) { deltaClass = "down"; deltaText = "⇩" + Math.abs(delta); }
    }

    const avatarUrl = getAvatarFor(id, info.name);
    const rankCell  = isMedal
      ? `<div class="xlb-rank">${MEDAL_SVGS[medalClass]}</div>`
      : `<div class="xlb-rank">${i + 1}</div>`;

    return `
      <div class="xlb-item ${isMedal ? "medal " + medalClass : ""} ${delta > 0 ? "rank-up" : ""}" style="--pct:${pct}">
        ${rankCell}
        <div class="xlb-avatar"><img src="${avatarUrl}" alt="avatar"></div>
        <div class="xlb-name">
          <span class="xlb-name-text">${info.name}</span>
          <span class="xlb-delta ${deltaClass}">${deltaText}</span>
        </div>
        <div class="xlb-count">${info.count}</div>
      </div>
    `;
  }).join("");

  slide.innerHTML = `
    <div class="xlb-panel">
      <div class="xlb-corners" aria-hidden="true">
        <span class="c tl"></span>
        <span class="c tr"></span>
        <span class="c bl"></span>
        <span class="c br"></span>
      </div>

      <div class="xlb-head">
        <div class="xlb-kicker">MONTHLY • TOP 10</div>
        <div class="xlb-title">Leaderboard</div>
        <div class="xlb-underline"></div>
      </div>

      <div class="xlb-list">${rowsHTML}</div>
    </div>
  `;

  document.querySelector(".slideshow-container").appendChild(slide);

  requestAnimationFrame(() => {
    document.querySelectorAll(".xlb-item").forEach((row, idx) => {
      row.style.setProperty("--d", `${idx * 70}ms`);
      row.classList.add("in");
    });
  });

  previousRanks = newRanks;
}
// === Instant loading overlay ===
function showLoadingPopup() {
  let el = document.getElementById("popup-loading");
  if (el) return el; // μην το ξαναστήνεις

  el = document.createElement("div");
  el.id = "popup-loading";
  el.innerHTML = `
    <div class="loading-card">
      <div class="loading-inner">

        <!-- 👇 ΚΥΚΛΙΚΟ LOGO ΜΕ ANIMATION -->
        <div class="holo-logo">
          <img
            src="https://i.postimg.cc/Y9HZXm3q/f26ceef4-3445-4c9a-a15d-64ea3cac2a95-removalai-preview.png"  /* βάλε σωστό path */
            alt="Lion logo"
            width="200" height="200"
            decoding="async" loading="eager"
          />
        </div>

        <div class="loading-title">
  Έλεγχος συνδρομής
</div>
        <div class="loading-sub">Παρακαλώ περιμένετε</div>
        <div class="loading-progress">
          <div class="loading-bar"></div>
        </div>
      </div>
    </div>
  `;
  document.body.appendChild(el);
  return el;
}

function hideLoadingPopup() {
  const el = document.getElementById("popup-loading");
  if (!el) return;
  el.classList.add("hide");
  setTimeout(() => el.remove(), 300);
}

function hideLoadingPopup() {
  const el = document.getElementById("popup-loading");
  if (el) el.remove();
}
    // Subscription check
    // Subscription check
async function checkSubscription() {
  const scannedId = localStorage.getItem("lastScannedId");
  if (!scannedId) return;

  const loading = showLoadingPopup(); // ⬅️ δείξε αμέσως overlay

  try {
    const response = await fetch(
      "https://script.google.com/macros/s/AKfycbzxFrrfTz9LGux2WxNJGdxAabKC5ca9fPNSYNLTejyMrVn2qCljaFb4_nPoNmSrE1TzUQ/exec?id=" + encodeURIComponent(scannedId),
      { cache: "no-store" }
    );

    const data = await response.json();
    console.log("✅ API Response:", data);
    hideLoadingPopup(); // ⬅️ έκρυψέ το μόλις ήρθε απάντηση

    if (!data.matchFound) {
      showPopup("Άγνωστος", false);
    } else {
      // μόνο το μικρό όνομα:
      const firstOnly = String(data.name || "").trim().split(/\s+/)[0] || "";
      const displayedName = formatName(firstOnly);
      showPopup(displayedName, !!data.active);
    }
  } catch (error) {
    console.error("❌ Σφάλμα κατά το fetch:", error);
    hideLoadingPopup(); // ⬅️ έκρυψέ το και σε σφάλμα
    showPopup("⚠️ Σφάλμα", false);
  }
}

    window.addEventListener("load", checkSubscription);
    window.addEventListener("storage", (e) => {
      if (e.key === "lastScannedId") {
        checkSubscription();
      }
    });
function updateClock() {
  const now = new Date();
  let hours = now.getHours();           // ✅ 24ωρο, χωρίς μετατροπή
  const minutes = now.getMinutes();

  const hoursStr = hours.toString().padStart(2, "0");
  const minutesStr = minutes.toString().padStart(2, "0");

  const time = `${hoursStr}:${minutesStr}`;  // ✅ Χωρίς AM/PM
  document.getElementById("digitalClock").textContent = time;
}

setInterval(updateClock, 10000); // ανανέωση κάθε 10 δευτερόλεπτα
updateClock(); // αρχική εμφάνιση


  </script>
</body>
</html>
